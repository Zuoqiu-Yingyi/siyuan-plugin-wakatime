"use strict";var Zs=Object.defineProperty;var Xs=(t,e,n)=>e in t?Zs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var F=(t,e,n)=>(Xs(t,typeof e!="symbol"?e+"":e,n),n);const Le=require("siyuan"),Qs=`<symbol
    id="icon-wakatime"
    viewBox="0 0 340 340"
    fill="none"
>
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M170 20C87.156 20 20 87.156 20 170C20 252.844 87.156 320 170 320C252.844 320 320 252.844 320 170C320 87.156 252.844 20 170 20V20V20Z"
        stroke="currentColor" stroke-width="40"
    />
    <path
        d="M190.183 213.541C188.74 215.443 186.576 216.667 184.151 216.667C183.913 216.667 183.677 216.651 183.443 216.627C183.042 216.579 182.823 216.545 182.606 216.497C182.337 216.434 182.137 216.375 181.94 216.308C181.561 216.176 181.392 216.109 181.228 216.035C180.843 215.849 180.707 215.778 180.572 215.701C180.205 215.478 180.109 215.412 180.014 215.345C179.856 215.233 179.698 215.117 179.547 214.992C179.251 214.746 179.147 214.65 179.044 214.552C178.731 214.241 178.531 214.018 178.341 213.785C177.982 213.331 177.69 212.888 177.438 212.415L168.6 198.214L159.766 212.415C158.38 214.939 155.874 216.667 152.995 216.667C150.106 216.667 147.588 214.926 146.243 212.346L107.607 156.061C106.337 154.529 105.556 152.499 105.556 150.258C105.556 145.514 109.043 141.665 113.344 141.665C116.127 141.665 118.564 143.282 119.942 145.708L152.555 193.9L161.735 178.952C163.058 176.288 165.626 174.478 168.575 174.478C171.273 174.478 173.652 175.996 175.049 178.298L184.517 193.839L235.684 120.583C237.075 118.226 239.475 116.667 242.213 116.667C246.514 116.667 250 120.514 250 125.258C250 127.332 249.337 129.232 248.23 130.715L190.183 213.541Z"
        fill="currentColor"
        stroke="currentColor"
        stroke-width="10"
    />

</symbol>
`,xs=`<symbol
   id="icon-wakatime-wakapi"
   viewBox="0 0 107.06042 107.06042"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
>
   <defs
      id="defs894">
      <clipPath
         clipPathUnits="userSpaceOnUse"
         id="clipPath20">
         <path
            d="M 0,700 H 1100 V 0 H 0 Z"
            id="path18" />
      </clipPath>
   </defs>
   <sodipodi:namedview
      id="base"
      pagecolor="#ffffff"
      bordercolor="#666666"
      borderopacity="1.0"
      inkscape:pageopacity="0.0"
      inkscape:pageshadow="2"
      inkscape:zoom="0.35"
      inkscape:cx="501.46484"
      inkscape:cy="865.17604"
      inkscape:document-units="mm"
      inkscape:current-layer="layer1"
      inkscape:document-rotation="0"
      showgrid="false"
      inkscape:window-width="1346"
      inkscape:window-height="1198"
      inkscape:window-x="149"
      inkscape:window-y="113"
      inkscape:window-maximized="0" />
   <metadata
      id="metadata897">
      <rdf:RDF>
         <cc:Work
            rdf:about="">
            <dc:format>image/svg+xml</dc:format>
            <dc:type
               rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
            <dc:title></dc:title>
         </cc:Work>
      </rdf:RDF>
   </metadata>
   <g
      inkscape:label="Layer 1"
      inkscape:groupmode="layer"
      id="layer1"
      transform="translate(26.845906,80.744493)">
      <g
         id="g14"
         transform="matrix(0.35277777,0,0,-0.35277777,-100.60779,96.696294)">
         <g
            id="g16"
            clip-path="url(#clipPath20)">
            <g
               id="g22"
               transform="translate(600.9092,345.958)" />
            <g
               id="g26"
               transform="translate(706.707,299.5566)" />
            <g
               id="g30"
               transform="translate(810.2764,345.958)" />
            <g
               id="g34"
               transform="translate(930.5527,345.958)" />
            <g
               id="g40"
               transform="translate(503.8398,367.5195)">
               <path
                  d="m 8.7266003,-16.286056 c 0,-3.170064 -0.10674,-6.340128 -0.32021,-9.492657 -0.85541,-13.857403 -3.56194,-27.197135 -7.89009005,-39.789715 C -18.95161,-122.31318 -71.13644,-163.86557 -133.5283,-167.69511 c -3.13424,-0.23101 -6.30506,-0.32097 -9.49342,-0.32097 -3.1876,0 -6.33937,0.09 -9.4919,0.32097 -76.24773,4.68419 -137.23296,65.6679 -141.91639,141.916397 -0.23101,3.152529 -0.32098,6.322593 -0.32098,9.492657 0,3.188361 0.09,6.358425 0.32098,9.493419 4.68343,76.22944 65.66866,137.249737 141.91639,141.933927 3.15253,0.21348 6.3043,0.32098 9.4919,0.32098 3.18836,0 6.35918,-0.1075 9.49342,-0.32098 V 94.354359 h -18.98532 V 110.75818 C -215.22645,106.14489 -265.43361,55.901133 -270.06444,-6.792637 h 14.65793 v -18.986076 h -14.65793 c 4.63083,-62.712067 54.83799,-112.920757 117.55082,-117.551577 v 16.72479 h 18.98532 v -16.72479 c 46.32654,3.42013 85.86619,31.73876 105.20907,71.59937 6.83873,14.070117 11.14859,29.584217 12.34251,45.952207 h -0.0358 l 8.8697703,18.986076 h 15.54917 c 0.21347,-3.134994 0.32021,-6.305058 0.32021,-9.493419"
                  style="fill:#2f855a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.762401"
                  id="path42" />
            </g>
            <g
               id="g44"
               transform="translate(504.2754,431.2373)">
               <path
                  d="m 11.6231,-31.425333 -17.1029497,8.252992 -4.6666503,-9.703842 -9.61922,-20.006168 -37.98968,-78.855149 -0.0572,-0.0854 h -37.47886 l -0.0282,0.0572 0.0282,0.0854 14.77,30.64853 3.78456,7.85425 0.19898,0.42618 19.2087,39.869009 7.37013,15.25336 2.27653,4.752808 11.72497,24.386926 -5.77672,2.761416 -9.59024,4.638449 49.9708203,23.249422 z"
                  style="fill:#2f855a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.762401"
                  id="path46" />
            </g>
            <g
               id="g48"
               transform="translate(258.5654,361.2139)">
               <path
                  d="m 65.50352,-19.287853 v -0.0183 L 46.73396,-58.308305 12.56848,12.654468 2.9523203,32.646912 H 40.49066 l 9.63446,-19.992444 z"
                  style="fill:#2f855a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.762401"
                  id="path50" />
            </g>
            <g
               id="g52"
               transform="translate(320.9248,367.3867)">
               <path
                  d="M 52.18699,-16.254503 27.28545,-67.966647 v -0.01906 h -37.57494 v 0.01906 l 18.7870903,39.002155 19.2506297,39.94677 5.65168,11.764611 5.66921,-11.764611 9.2647,-19.232331 z"
                  style="fill:#2f855a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.762401"
                  id="path54" />
            </g>
            <g
               id="g56"
               transform="translate(383.7656,359.833)">
               <path
                  d="m 38.75609,-18.959752 -3.78456,-7.854257 -14.7982,-30.591345 -0.0282,-0.08539 -25.2979997,52.560696 -9.1358503,18.95253 -9.61769,20.005406 h 37.10759 z"
                  style="fill:#2f855a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.762401"
                  id="path58" />
            </g>
         </g>
      </g>
   </g>
</symbol>
`,ei="wakatime",ti="Zuoqiu Yingyi",ni="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-wakatime",si="0.3.5",ii="2.10.13",ri=["分析","统计","統計","编辑活动","編輯活動","statistics","analytics","wakatime","wakapi"],ai=["all"],oi=["all"],li={default:"WakaTime"},ci={default:"Use <a href='https://github.com/muety/wakapi'>Wakapi</a> or <a href='https://wakatime.com/'>WakaTime</a> to count your editing Activity",zh_CN:"使用 <a href='https://github.com/muety/wakapi'>Wakapi</a> 或 <a href='https://wakatime.com/'>WakaTime</a> 统计您的编辑活动",zh_CHT:"使用 <a href='https://github.com/muety/wakapi'>Wakapi</a> 或 <a href='https://wakatime.com/'>WakaTime</a> 統計您的編輯活動"},ui={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},fi={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},yn={name:ei,author:ti,url:ni,version:si,minAppVersion:ii,keywords:ri,backends:ai,frontends:oi,displayName:li,description:ci,readme:ui,funding:fi};var pi=Object.defineProperty,hi=(t,e,n)=>e in t?pi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pe=(t,e,n)=>(hi(t,typeof e!="symbol"?e+"":e,n),n);const mi=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,di=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,gi=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function _i(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){bi(t);return}return e}function bi(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function wi(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t[t.length-1]==='"')return n.slice(1,-1);if(n.length<=9){const s=n.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!gi.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(mi.test(t)||di.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,_i)}return JSON.parse(t)}catch(s){if(e.strict)throw s;return t}}const ki=/#/g,yi=/&/g,vi=/=/g,It=/\+/g,Si=/%5e/gi,$i=/%60/gi,Ti=/%7c/gi,Ai=/%20/gi;function Ei(t){return encodeURI(""+t).replace(Ti,"|")}function $t(t){return Ei(typeof t=="string"?t:JSON.stringify(t)).replace(It,"%2B").replace(Ai,"+").replace(ki,"%23").replace(yi,"%26").replace($i,"`").replace(Si,"^")}function gt(t){return $t(t).replace(vi,"%3D")}function _s(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function Oi(t){return _s(t.replace(It," "))}function Ci(t){return _s(t.replace(It," "))}function Di(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const i=Oi(s[1]);if(i==="__proto__"||i==="constructor")continue;const r=Ci(s[2]||"");e[i]===void 0?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}return e}function Ri(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${gt(t)}=${$t(n)}`).join("&"):`${gt(t)}=${$t(e)}`:gt(t)}function Pi(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>Ri(e,t[e])).filter(Boolean).join("&")}const Ni=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Bi=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Li=/^([/\\]\s*){2,}[^/\\]/;function bs(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Ni.test(t):Bi.test(t)||(e.acceptRelative?Li.test(t):!1)}const ji=/\/$|\/\?/;function Tt(t="",e=!1){return e?ji.test(t):t.endsWith("/")}function Ii(t="",e=!1){if(!e)return(Tt(t)?t.slice(0,-1):t)||"/";if(!Tt(t,!0))return t||"/";const[n,...s]=t.split("?");return(n.slice(0,-1)||"/")+(s.length>0?`?${s.join("?")}`:"")}function Mi(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(Tt(t,!0))return t||"/";const[n,...s]=t.split("?");return n+"/"+(s.length>0?`?${s.join("?")}`:"")}function Ui(t,e){if(qi(e)||bs(t))return t;const n=Ii(e);return t.startsWith(n)?t:Wi(n,t)}function Fi(t,e){const n=ws(t),s={...Di(n.search),...e};return n.search=Pi(s),zi(n)}function qi(t){return!t||t==="/"}function Vi(t){return t&&t!=="/"}const Hi=/^\.?\//;function Wi(t,...e){let n=t||"";for(const s of e.filter(i=>Vi(i)))if(n){const i=s.replace(Hi,"");n=Mi(n)+i}else n=s;return n}function ws(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(n){const[,h,b=""]=n;return{protocol:h,pathname:b,href:h+b,auth:"",host:"",search:"",hash:""}}if(!bs(t,{acceptRelative:!0}))return e?ws(e+t):vn(t);const[,s="",i,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",o=""]=r.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:u,hash:c}=vn(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:s,auth:i?i.slice(0,Math.max(0,i.length-1)):"",host:a,pathname:l,search:u,hash:c}}function vn(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function zi(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",i=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol?t.protocol+"//":"")+i+r+e+n+s}class Ki extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function Gi(t){var e,n,s,i,r;const a=((e=t.error)==null?void 0:e.message)||((n=t.error)==null?void 0:n.toString())||"",o=((s=t.request)==null?void 0:s.method)||((i=t.options)==null?void 0:i.method)||"GET",l=((r=t.request)==null?void 0:r.url)||String(t.request)||"/",u=`[${o}] ${JSON.stringify(l)}`,c=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",h=`${u}: ${c}${a?` ${a}`:""}`,b=new Ki(h,t.error?{cause:t.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(b,f,{get(){return t[f]}});for(const[f,m]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(b,f,{get(){return t.response&&t.response[m]}});return b}const Ji=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Sn(t="GET"){return Ji.has(t.toUpperCase())}function Yi(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const Zi=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Xi=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Qi(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return Xi.test(e)?"json":Zi.has(e)||e.startsWith("text/")?"text":"blob"}function xi(t,e,n=globalThis.Headers){const s={...e,...t};if(e!=null&&e.params&&t!=null&&t.params&&(s.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&t!=null&&t.query&&(s.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&t!=null&&t.headers){s.headers=new n((e==null?void 0:e.headers)||{});for(const[i,r]of new n((t==null?void 0:t.headers)||{}))s.headers.set(i,r)}return s}const er=new Set([408,409,425,429,500,502,503,504]),tr=new Set([101,204,205,304]);function ks(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function i(o){const l=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!l){let c;typeof o.options.retry=="number"?c=o.options.retry:c=Sn(o.options.method)?0:1;const h=o.response&&o.response.status||500;if(c>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(h):er.has(h))){const b=o.options.retryDelay||0;return b>0&&await new Promise(f=>setTimeout(f,b)),r(o.request,{...o.options,retry:c-1,timeout:o.options.timeout})}}const u=Gi(o);throw Error.captureStackTrace&&Error.captureStackTrace(u,r),u}const r=async function(o,l={}){var u;const c={request:o,options:xi(l,t.defaults,n),response:void 0,error:void 0};if(c.options.method=(u=c.options.method)==null?void 0:u.toUpperCase(),c.options.onRequest&&await c.options.onRequest(c),typeof c.request=="string"&&(c.options.baseURL&&(c.request=Ui(c.request,c.options.baseURL)),(c.options.query||c.options.params)&&(c.request=Fi(c.request,{...c.options.params,...c.options.query}))),c.options.body&&Sn(c.options.method)&&(Yi(c.options.body)?(c.options.body=typeof c.options.body=="string"?c.options.body:JSON.stringify(c.options.body),c.options.headers=new n(c.options.headers||{}),c.options.headers.has("content-type")||c.options.headers.set("content-type","application/json"),c.options.headers.has("accept")||c.options.headers.set("accept","application/json")):("pipeTo"in c.options.body&&typeof c.options.body.pipeTo=="function"||typeof c.options.body.pipe=="function")&&("duplex"in c.options||(c.options.duplex="half"))),!c.options.signal&&c.options.timeout){const h=new s;setTimeout(()=>h.abort(),c.options.timeout),c.options.signal=h.signal}try{c.response=await e(c.request,c.options)}catch(h){return c.error=h,c.options.onRequestError&&await c.options.onRequestError(c),await i(c)}if(c.response.body&&!tr.has(c.response.status)&&c.options.method!=="HEAD"){const h=(c.options.parseResponse?"json":c.options.responseType)||Qi(c.response.headers.get("content-type")||"");switch(h){case"json":{const b=await c.response.text(),f=c.options.parseResponse||wi;c.response._data=f(b);break}case"stream":{c.response._data=c.response.body;break}default:c.response._data=await c.response[h]()}}return c.options.onResponse&&await c.options.onResponse(c),!c.options.ignoreResponseError&&c.response.status>=400&&c.response.status<600?(c.options.onResponseError&&await c.options.onResponseError(c),await i(c)):c.response},a=async function(o,l){return(await r(o,l))._data};return a.raw=r,a.native=(...o)=>e(...o),a.create=(o={})=>ks({...t,defaults:{...t.defaults,...o}}),a}const Mt=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),nr=Mt.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),sr=Mt.Headers,ir=Mt.AbortController,rr=ks({fetch:nr,Headers:sr,AbortController:ir});class ar extends Error{constructor(e){super(e.statusText),pe(this,"status"),this.response=e,this.status=e.status}}class $n extends Error{constructor(e,n){super(e.msg),pe(this,"code"),this.body=e,this.response=n,this.code=e.code}}function te(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Tn(t,e){for(var n="",s=0,i=-1,r=0,a,o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||r===1))if(i!==o-1&&r===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",s=0):(n=n.slice(0,l),s=n.length-1-n.lastIndexOf("/")),i=o,r=0;continue}}else if(n.length===2||n.length===1){n="",s=0,i=o,r=0;continue}}e&&(n.length>0?n+="/..":n="..",s=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),s=o-i-1;i=o,r=0}else a===46&&r!==-1?++r:r=-1}return n}function or(t,e){var n=e.dir||e.root,s=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+s:n+t+s:s}var We={resolve:function(){for(var t="",e=!1,n,s=arguments.length-1;s>=-1&&!e;s--){var i;s>=0?i=arguments[s]:(n===void 0&&(n=process.cwd()),i=n),te(i),i.length!==0&&(t=i+"/"+t,e=i.charCodeAt(0)===47)}return t=Tn(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(te(t),t.length===0)return".";var e=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=Tn(t,!e),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return te(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];te(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":We.normalize(t)},relative:function(t,e){if(te(t),te(e),t===e||(t=We.resolve(t),e=We.resolve(e),t===e))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var s=t.length,i=s-n,r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var a=e.length,o=a-r,l=i<o?i:o,u=-1,c=0;c<=l;++c){if(c===l){if(o>l){if(e.charCodeAt(r+c)===47)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else i>l&&(t.charCodeAt(n+c)===47?u=c:c===0&&(u=0));break}var h=t.charCodeAt(n+c),b=e.charCodeAt(r+c);if(h!==b)break;h===47&&(u=c)}var f="";for(c=n+u+1;c<=s;++c)(c===s||t.charCodeAt(c)===47)&&(f.length===0?f+="..":f+="/..");return f.length>0?f+e.slice(r+u):(r+=u,e.charCodeAt(r)===47&&++r,e.slice(r))},_makeLong:function(t){return t},dirname:function(t){if(te(t),t.length===0)return".";for(var e=t.charCodeAt(0),n=e===47,s=-1,i=!0,r=t.length-1;r>=1;--r)if(e=t.charCodeAt(r),e===47){if(!i){s=r;break}}else i=!1;return s===-1?n?"/":".":n&&s===1?"//":t.slice(0,s)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');te(t);var n=0,s=-1,i=!0,r;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,o=-1;for(r=t.length-1;r>=0;--r){var l=t.charCodeAt(r);if(l===47){if(!i){n=r+1;break}}else o===-1&&(i=!1,o=r+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(s=r):(a=-1,s=o))}return n===s?s=o:s===-1&&(s=t.length),t.slice(n,s)}else{for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!i){n=r+1;break}}else s===-1&&(i=!1,s=r+1);return s===-1?"":t.slice(n,s)}},extname:function(t){te(t);for(var e=-1,n=0,s=-1,i=!0,r=0,a=t.length-1;a>=0;--a){var o=t.charCodeAt(a);if(o===47){if(!i){n=a+1;break}continue}s===-1&&(i=!1,s=a+1),o===46?e===-1?e=a:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||s===-1||r===0||r===1&&e===s-1&&e===n+1?"":t.slice(e,s)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return or("/",t)},parse:function(t){te(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var n=t.charCodeAt(0),s=n===47,i;s?(e.root="/",i=1):i=0;for(var r=-1,a=0,o=-1,l=!0,u=t.length-1,c=0;u>=i;--u){if(n=t.charCodeAt(u),n===47){if(!l){a=u+1;break}continue}o===-1&&(l=!1,o=u+1),n===46?r===-1?r=u:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||o===-1||c===0||c===1&&r===o-1&&r===a+1?o!==-1&&(a===0&&s?e.base=e.name=t.slice(1,o):e.base=e.name=t.slice(a,o)):(a===0&&s?(e.name=t.slice(1,r),e.base=t.slice(1,o)):(e.name=t.slice(a,r),e.base=t.slice(a,o)),e.ext=t.slice(r,o)),a>0?e.dir=t.slice(0,a-1):s&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};We.posix=We;function ys(t,e){return function(){return t.apply(e,arguments)}}const{toString:lr}=Object.prototype,{getPrototypeOf:Ut}=Object,ut=(t=>e=>{const n=lr.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ie=t=>(t=t.toLowerCase(),e=>ut(e)===t),ft=t=>e=>typeof e===t,{isArray:qe}=Array,Ge=ft("undefined");function cr(t){return t!==null&&!Ge(t)&&t.constructor!==null&&!Ge(t.constructor)&&X(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vs=ie("ArrayBuffer");function ur(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vs(t.buffer),e}const fr=ft("string"),X=ft("function"),Ss=ft("number"),pt=t=>t!==null&&typeof t=="object",pr=t=>t===!0||t===!1,it=t=>{if(ut(t)!=="object")return!1;const e=Ut(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hr=ie("Date"),mr=ie("File"),dr=ie("Blob"),gr=ie("FileList"),_r=t=>pt(t)&&X(t.pipe),br=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||X(t.append)&&((e=ut(t))==="formdata"||e==="object"&&X(t.toString)&&t.toString()==="[object FormData]"))},wr=ie("URLSearchParams"),kr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ze(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,i;if(typeof t!="object"&&(t=[t]),qe(t))for(s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),a=r.length;let o;for(s=0;s<a;s++)o=r[s],e.call(null,t[o],o,t)}}function $s(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,i;for(;s-- >0;)if(i=n[s],e===i.toLowerCase())return i;return null}const Ts=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),As=t=>!Ge(t)&&t!==Ts;function At(){const{caseless:t}=As(this)&&this||{},e={},n=(s,i)=>{const r=t&&$s(e,i)||i;it(e[r])&&it(s)?e[r]=At(e[r],s):it(s)?e[r]=At({},s):qe(s)?e[r]=s.slice():e[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Ze(arguments[s],n);return e}const yr=(t,e,n,{allOwnKeys:s}={})=>(Ze(e,(i,r)=>{n&&X(i)?t[r]=ys(i,n):t[r]=i},{allOwnKeys:s}),t),vr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Sr=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$r=(t,e,n,s)=>{let i,r,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)a=i[r],(!s||s(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&Ut(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Tr=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},Ar=t=>{if(!t)return null;if(qe(t))return t;let e=t.length;if(!Ss(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Er=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ut(Uint8Array)),Or=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Cr=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},Dr=ie("HTMLFormElement"),Rr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),An=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Pr=ie("RegExp"),Es=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Ze(n,(i,r)=>{let a;(a=e(i,r,t))!==!1&&(s[r]=a||i)}),Object.defineProperties(t,s)},Nr=t=>{Es(t,(e,n)=>{if(X(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(X(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Br=(t,e)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return qe(t)?s(t):s(String(t).split(e)),n},Lr=()=>{},jr=(t,e)=>(t=+t,Number.isFinite(t)?t:e),_t="abcdefghijklmnopqrstuvwxyz",En="0123456789",Os={DIGIT:En,ALPHA:_t,ALPHA_DIGIT:_t+_t.toUpperCase()+En},Ir=(t=16,e=Os.ALPHA_DIGIT)=>{let n="";const{length:s}=e;for(;t--;)n+=e[Math.random()*s|0];return n};function Mr(t){return!!(t&&X(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ur=t=>{const e=new Array(10),n=(s,i)=>{if(pt(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const r=qe(s)?[]:{};return Ze(s,(a,o)=>{const l=n(a,i+1);!Ge(l)&&(r[o]=l)}),e[i]=void 0,r}}return s};return n(t,0)},Fr=ie("AsyncFunction"),qr=t=>t&&(pt(t)||X(t))&&X(t.then)&&X(t.catch),d={isArray:qe,isArrayBuffer:vs,isBuffer:cr,isFormData:br,isArrayBufferView:ur,isString:fr,isNumber:Ss,isBoolean:pr,isObject:pt,isPlainObject:it,isUndefined:Ge,isDate:hr,isFile:mr,isBlob:dr,isRegExp:Pr,isFunction:X,isStream:_r,isURLSearchParams:wr,isTypedArray:Er,isFileList:gr,forEach:Ze,merge:At,extend:yr,trim:kr,stripBOM:vr,inherits:Sr,toFlatObject:$r,kindOf:ut,kindOfTest:ie,endsWith:Tr,toArray:Ar,forEachEntry:Or,matchAll:Cr,isHTMLForm:Dr,hasOwnProperty:An,hasOwnProp:An,reduceDescriptors:Es,freezeMethods:Nr,toObjectSet:Br,toCamelCase:Rr,noop:Lr,toFiniteNumber:jr,findKey:$s,global:Ts,isContextDefined:As,ALPHABET:Os,generateString:Ir,isSpecCompliantForm:Mr,toJSONObject:Ur,isAsyncFn:Fr,isThenable:qr};function j(t,e,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}d.inherits(j,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Cs=j.prototype,Ds={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ds[t]={value:t}});Object.defineProperties(j,Ds);Object.defineProperty(Cs,"isAxiosError",{value:!0});j.from=(t,e,n,s,i,r)=>{const a=Object.create(Cs);return d.toFlatObject(t,a,function(o){return o!==Error.prototype},o=>o!=="isAxiosError"),j.call(a,t.message,e,n,s,i),a.cause=t,a.name=t.name,r&&Object.assign(a,r),a};const Vr=null;function Et(t){return d.isPlainObject(t)||d.isArray(t)}function Rs(t){return d.endsWith(t,"[]")?t.slice(0,-2):t}function On(t,e,n){return t?t.concat(e).map(function(s,i){return s=Rs(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Hr(t){return d.isArray(t)&&!t.some(Et)}const Wr=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function ht(t,e,n){if(!d.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,m){return!d.isUndefined(m[f])});const s=n.metaTokens,i=n.visitor||u,r=n.dots,a=n.indexes,o=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(e);if(!d.isFunction(i))throw new TypeError("visitor must be a function");function l(f){if(f===null)return"";if(d.isDate(f))return f.toISOString();if(!o&&d.isBlob(f))throw new j("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(f)||d.isTypedArray(f)?o&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,m,_){let g=f;if(f&&!_&&typeof f=="object"){if(d.endsWith(m,"{}"))m=s?m:m.slice(0,-2),f=JSON.stringify(f);else if(d.isArray(f)&&Hr(f)||(d.isFileList(f)||d.endsWith(m,"[]"))&&(g=d.toArray(f)))return m=Rs(m),g.forEach(function(P,K){!(d.isUndefined(P)||P===null)&&e.append(a===!0?On([m],K,r):a===null?m:m+"[]",l(P))}),!1}return Et(f)?!0:(e.append(On(_,m,r),l(f)),!1)}const c=[],h=Object.assign(Wr,{defaultVisitor:u,convertValue:l,isVisitable:Et});function b(f,m){if(!d.isUndefined(f)){if(c.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));c.push(f),d.forEach(f,function(_,g){(!(d.isUndefined(_)||_===null)&&i.call(e,_,d.isString(g)?g.trim():g,m,h))===!0&&b(_,m?m.concat(g):[g])}),c.pop()}}if(!d.isObject(t))throw new TypeError("data must be an object");return b(t),e}function Cn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Ft(t,e){this._pairs=[],t&&ht(t,this,e)}const Ps=Ft.prototype;Ps.append=function(t,e){this._pairs.push([t,e])};Ps.toString=function(t){const e=t?function(n){return t.call(this,n,Cn)}:Cn;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function zr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ns(t,e,n){if(!e)return t;const s=n&&n.encode||zr,i=n&&n.serialize;let r;if(i?r=i(e,n):r=d.isURLSearchParams(e)?e.toString():new Ft(e,n).toString(s),r){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Kr{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){d.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Dn=Kr,Bs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gr=typeof URLSearchParams<"u"?URLSearchParams:Ft,Jr=typeof FormData<"u"?FormData:null,Yr=typeof Blob<"u"?Blob:null,Zr=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Xr=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),se={isBrowser:!0,classes:{URLSearchParams:Gr,FormData:Jr,Blob:Yr},isStandardBrowserEnv:Zr,isStandardBrowserWebWorkerEnv:Xr,protocols:["http","https","file","blob","url","data"]};function Qr(t,e){return ht(t,new se.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return se.isNode&&d.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function xr(t){return d.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ea(t){const e={},n=Object.keys(t);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],e[r]=t[r];return e}function Ls(t){function e(n,s,i,r){let a=n[r++];const o=Number.isFinite(+a),l=r>=n.length;return a=!a&&d.isArray(i)?i.length:a,l?(d.hasOwnProp(i,a)?i[a]=[i[a],s]:i[a]=s,!o):((!i[a]||!d.isObject(i[a]))&&(i[a]=[]),e(n,s,i[a],r)&&d.isArray(i[a])&&(i[a]=ea(i[a])),!o)}if(d.isFormData(t)&&d.isFunction(t.entries)){const n={};return d.forEachEntry(t,(s,i)=>{e(xr(s),i,n,0)}),n}return null}function ta(t,e,n){if(d.isString(t))try{return(e||JSON.parse)(t),d.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const qt={transitional:Bs,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,i=d.isObject(t);if(i&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return s&&s?JSON.stringify(Ls(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Qr(t,this.formSerializer).toString();if((r=d.isFileList(t))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return ht(r?{"files[]":t}:t,a&&new a,this.formSerializer)}}return i||s?(e.setContentType("application/json",!1),ta(t)):t}],transformResponse:[function(t){const e=this.transitional||qt.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(t&&d.isString(t)&&(n&&!this.responseType||s)){const i=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(r){if(i)throw r.name==="SyntaxError"?j.from(r,j.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:se.classes.FormData,Blob:se.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],t=>{qt.headers[t]={}});const Vt=qt,na=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sa=t=>{const e={};let n,s,i;return t&&t.split(`
`).forEach(function(r){i=r.indexOf(":"),n=r.substring(0,i).trim().toLowerCase(),s=r.substring(i+1).trim(),!(!n||e[n]&&na[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},Rn=Symbol("internals");function Ve(t){return t&&String(t).trim().toLowerCase()}function rt(t){return t===!1||t==null?t:d.isArray(t)?t.map(rt):String(t)}function ia(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const ra=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bt(t,e,n,s,i){if(d.isFunction(s))return s.call(this,e,n);if(i&&(e=n),!!d.isString(e)){if(d.isString(s))return e.indexOf(s)!==-1;if(d.isRegExp(s))return s.test(e)}}function aa(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function oa(t,e){const n=d.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(i,r,a){return this[s].call(this,e,i,r,a)},configurable:!0})})}let mt=class{constructor(t){t&&this.set(t)}set(t,e,n){const s=this;function i(a,o,l){const u=Ve(o);if(!u)throw new Error("header name must be a non-empty string");const c=d.findKey(s,u);(!c||s[c]===void 0||l===!0||l===void 0&&s[c]!==!1)&&(s[c||o]=rt(a))}const r=(a,o)=>d.forEach(a,(l,u)=>i(l,u,o));return d.isPlainObject(t)||t instanceof this.constructor?r(t,e):d.isString(t)&&(t=t.trim())&&!ra(t)?r(sa(t),e):t!=null&&i(e,t,n),this}get(t,e){if(t=Ve(t),t){const n=d.findKey(this,t);if(n){const s=this[n];if(!e)return s;if(e===!0)return ia(s);if(d.isFunction(e))return e.call(this,s,n);if(d.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ve(t),t){const n=d.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||bt(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let s=!1;function i(r){if(r=Ve(r),r){const a=d.findKey(n,r);a&&(!e||bt(n,n[a],a,e))&&(delete n[a],s=!0)}}return d.isArray(t)?t.forEach(i):i(t),s}clear(t){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const i=e[n];(!t||bt(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const e=this,n={};return d.forEach(this,(s,i)=>{const r=d.findKey(n,i);if(r){e[r]=rt(s),delete e[i];return}const a=t?aa(i):String(i).trim();a!==i&&delete e[i],e[a]=rt(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return d.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=t&&d.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(s=>n.set(s)),n}static accessor(t){const e=(this[Rn]=this[Rn]={accessors:{}}).accessors,n=this.prototype;function s(i){const r=Ve(i);e[r]||(oa(n,i),e[r]=!0)}return d.isArray(t)?t.forEach(s):s(t),this}};mt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(mt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});d.freezeMethods(mt);const he=mt;function wt(t,e){const n=this||Vt,s=e||n,i=he.from(s.headers);let r=s.data;return d.forEach(t,function(a){r=a.call(n,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function js(t){return!!(t&&t.__CANCEL__)}function Xe(t,e,n){j.call(this,t??"canceled",j.ERR_CANCELED,e,n),this.name="CanceledError"}d.inherits(Xe,j,{__CANCEL__:!0});function la(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new j("Request failed with status code "+n.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ca=se.isStandardBrowserEnv?function(){return{write:function(t,e,n,s,i,r){const a=[];a.push(t+"="+encodeURIComponent(e)),d.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),d.isString(s)&&a.push("path="+s),d.isString(i)&&a.push("domain="+i),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function ua(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function fa(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Is(t,e){return t&&!ua(e)?fa(t,e):e}const pa=se.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function s(i){let r=i;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=s(window.location.href),function(i){const r=d.isString(i)?s(i):i;return r.protocol===n.protocol&&r.host===n.host}}():function(){return function(){return!0}}();function ha(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ma(t,e){t=t||10;const n=new Array(t),s=new Array(t);let i=0,r=0,a;return e=e!==void 0?e:1e3,function(o){const l=Date.now(),u=s[r];a||(a=l),n[i]=o,s[i]=l;let c=r,h=0;for(;c!==i;)h+=n[c++],c=c%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),l-a<e)return;const b=u&&l-u;return b?Math.round(h*1e3/b):void 0}}function Pn(t,e){let n=0;const s=ma(50,250);return i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,o=r-n,l=s(o),u=r<=a;n=r;const c={loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&u?(a-r)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const da=typeof XMLHttpRequest<"u",ga=da&&function(t){return new Promise(function(e,n){let s=t.data;const i=he.from(t.headers).normalize(),r=t.responseType;let a;function o(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let l;d.isFormData(s)&&(se.isStandardBrowserEnv||se.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?d.isString(l=i.getContentType())&&i.setContentType(l.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(t.auth){const f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(f+":"+m))}const c=Is(t.baseURL,t.url);u.open(t.method.toUpperCase(),Ns(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const f=he.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),m={data:!r||r==="text"||r==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:f,config:t,request:u};la(function(_){e(_),o()},function(_){n(_),o()},m),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(n(new j("Request aborted",j.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new j("Network Error",j.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let f=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||Bs;t.timeoutErrorMessage&&(f=t.timeoutErrorMessage),n(new j(f,m.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,t,u)),u=null},se.isStandardBrowserEnv){const f=(t.withCredentials||pa(c))&&t.xsrfCookieName&&ca.read(t.xsrfCookieName);f&&i.set(t.xsrfHeaderName,f)}s===void 0&&i.setContentType(null),"setRequestHeader"in u&&d.forEach(i.toJSON(),function(f,m){u.setRequestHeader(m,f)}),d.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),r&&r!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Pn(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Pn(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=f=>{u&&(n(!f||f.type?new Xe(null,t,u):f),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const b=ha(c);if(b&&se.protocols.indexOf(b)===-1){n(new j("Unsupported protocol "+b+":",j.ERR_BAD_REQUEST,t));return}u.send(s||null)})},Ot={http:Vr,xhr:ga};d.forEach(Ot,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Nn=t=>`- ${t}`,_a=t=>d.isFunction(t)||t===null||t===!1,Ms={getAdapter:t=>{t=d.isArray(t)?t:[t];const{length:e}=t;let n,s;const i={};for(let r=0;r<e;r++){n=t[r];let a;if(s=n,!_a(n)&&(s=Ot[(a=String(n)).toLowerCase()],s===void 0))throw new j(`Unknown adapter '${a}'`);if(s)break;i[a||"#"+r]=s}if(!s){const r=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(Nn).join(`
`):" "+Nn(r[0]):"as no adapter specified";throw new j("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Ot};function kt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xe(null,t)}function Bn(t){return kt(t),t.headers=he.from(t.headers),t.data=wt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ms.getAdapter(t.adapter||Vt.adapter)(t).then(function(e){return kt(t),e.data=wt.call(t,t.transformResponse,e),e.headers=he.from(e.headers),e},function(e){return js(e)||(kt(t),e&&e.response&&(e.response.data=wt.call(t,t.transformResponse,e.response),e.response.headers=he.from(e.response.headers))),Promise.reject(e)})}const Ln=t=>t instanceof he?t.toJSON():t;function Me(t,e){e=e||{};const n={};function s(u,c,h){return d.isPlainObject(u)&&d.isPlainObject(c)?d.merge.call({caseless:h},u,c):d.isPlainObject(c)?d.merge({},c):d.isArray(c)?c.slice():c}function i(u,c,h){if(d.isUndefined(c)){if(!d.isUndefined(u))return s(void 0,u,h)}else return s(u,c,h)}function r(u,c){if(!d.isUndefined(c))return s(void 0,c)}function a(u,c){if(d.isUndefined(c)){if(!d.isUndefined(u))return s(void 0,u)}else return s(void 0,c)}function o(u,c,h){if(h in e)return s(u,c);if(h in t)return s(void 0,u)}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c)=>i(Ln(u),Ln(c),!0)};return d.forEach(Object.keys(Object.assign({},t,e)),function(u){const c=l[u]||i,h=c(t[u],e[u],u);d.isUndefined(h)&&c!==o||(n[u]=h)}),n}const Us="1.5.1",Ht={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ht[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const jn={};Ht.transitional=function(t,e,n){function s(i,r){return"[Axios v"+Us+"] Transitional option '"+i+"'"+r+(n?". "+n:"")}return(i,r,a)=>{if(t===!1)throw new j(s(r," has been removed"+(e?" in "+e:"")),j.ERR_DEPRECATED);return e&&!jn[r]&&(jn[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(i,r,a):!0}};function ba(t,e,n){if(typeof t!="object")throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let i=s.length;for(;i-- >0;){const r=s[i],a=e[r];if(a){const o=t[r],l=o===void 0||a(o,r,t);if(l!==!0)throw new j("option "+r+" must be "+l,j.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new j("Unknown option "+r,j.ERR_BAD_OPTION)}}const Ct={assertOptions:ba,validators:Ht},be=Ct.validators;let lt=class{constructor(t){this.defaults=t,this.interceptors={request:new Dn,response:new Dn}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Me(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:i}=e;n!==void 0&&Ct.assertOptions(n,{silentJSONParsing:be.transitional(be.boolean),forcedJSONParsing:be.transitional(be.boolean),clarifyTimeoutError:be.transitional(be.boolean)},!1),s!=null&&(d.isFunction(s)?e.paramsSerializer={serialize:s}:Ct.assertOptions(s,{encode:be.function,serialize:be.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=i&&d.merge(i.common,i[e.method]);i&&d.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),e.headers=he.concat(r,i);const a=[];let o=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(o=o&&f.synchronous,a.unshift(f.fulfilled,f.rejected))});const l=[];this.interceptors.response.forEach(function(f){l.push(f.fulfilled,f.rejected)});let u,c=0,h;if(!o){const f=[Bn.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,l),h=f.length,u=Promise.resolve(e);c<h;)u=u.then(f[c++],f[c++]);return u}h=a.length;let b=e;for(c=0;c<h;){const f=a[c++],m=a[c++];try{b=f(b)}catch(_){m.call(this,_);break}}try{u=Bn.call(this,b)}catch(f){return Promise.reject(f)}for(c=0,h=l.length;c<h;)u=u.then(l[c++],l[c++]);return u}getUri(t){t=Me(this.defaults,t);const e=Is(t.baseURL,t.url);return Ns(e,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){lt.prototype[t]=function(e,n){return this.request(Me(n||{},{method:t,url:e,data:(n||{}).data}))}});d.forEach(["post","put","patch"],function(t){function e(n){return function(s,i,r){return this.request(Me(r||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}lt.prototype[t]=e(),lt.prototype[t+"Form"]=e(!0)});const at=lt;let wa=class Fs{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const a=new Promise(o=>{s.subscribe(o),r=o}).then(i);return a.cancel=function(){s.unsubscribe(r)},a},e(function(i,r,a){s.reason||(s.reason=new Xe(i,r,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Fs(function(n){e=n}),cancel:e}}};const ka=wa;function ya(t){return function(e){return t.apply(null,e)}}function va(t){return d.isObject(t)&&t.isAxiosError===!0}const Dt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dt).forEach(([t,e])=>{Dt[e]=t});const Sa=Dt;function qs(t){const e=new at(t),n=ys(at.prototype.request,e);return d.extend(n,at.prototype,e,{allOwnKeys:!0}),d.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return qs(Me(t,s))},n}const W=qs(Vt);W.Axios=at;W.CanceledError=Xe;W.CancelToken=ka;W.isCancel=js;W.VERSION=Us;W.toFormData=ht;W.AxiosError=j;W.Cancel=W.CanceledError;W.all=function(t){return Promise.all(t)};W.spread=ya;W.isAxiosError=va;W.mergeConfig=Me;W.AxiosHeaders=he;W.formToJSON=t=>Ls(d.isHTMLForm(t)?new FormData(t):t);W.getAdapter=Ms.getAdapter;W.HttpStatusCode=Sa;W.default=W;const Vs=W,{Axios:ql,AxiosError:Vl,CanceledError:Hl,isCancel:Wl,CancelToken:zl,VERSION:Kl,all:Gl,Cancel:Jl,isAxiosError:Yl,spread:Zl,toFormData:Xl,AxiosHeaders:Ql,HttpStatusCode:st,formToJSON:xl,getAdapter:ec,mergeConfig:tc}=Vs;var Ne=null;typeof WebSocket<"u"?Ne=WebSocket:typeof MozWebSocket<"u"?Ne=MozWebSocket:typeof global<"u"?Ne=global.WebSocket||global.MozWebSocket:typeof window<"u"?Ne=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Ne=self.WebSocket||self.MozWebSocket);const $a=Ne,yt={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var In,Mn,Un,Fn,qn;const Rt=class p{constructor(e={},n="xhr"){pe(this,"_type","xhr"),pe(this,"_baseURL",((Mn=(In=globalThis.top)==null?void 0:In.document)==null?void 0:Mn.baseURI)??((Fn=(Un=globalThis.parent)==null?void 0:Un.document)==null?void 0:Fn.baseURI)??((qn=globalThis.location)==null?void 0:qn.origin)??yt.SIYUAN_DEFAULT_BASE_URL),pe(this,"_token",yt.SIYUAN_DEFAULT_TOKEN),pe(this,"_axios",Vs.create({baseURL:this._baseURL,timeout:yt.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),pe(this,"_fetch",rr.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(n),this._updateOptions(e,n)}_setClientType(e){this._type=e}_updateOptions(e,n=this._type){switch(this._token=e.token??this._token,this._baseURL=e.baseURL??this._baseURL,n){case"fetch":const s=e;if(s.token){const i="Authorization",r=`Token ${e.token}`;Array.isArray(s.headers)?s.headers.push([i,r]):s.headers instanceof Headers?s.headers.set(i,r):typeof s.headers=="object"?s.headers[i]=r:s.headers={[i]:r},delete e.token}this._fetch=this._fetch.create(s);break;case"xhr":default:for(const[i,r]of Object.entries(e))switch(i){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[i]=r;break}break}this._baseURL=e.baseURL??this._baseURL}broadcast(e,n,s){const i=(s==null?void 0:s.baseURL)??this._baseURL,r=(s==null?void 0:s.token)??this._token,a=new URLSearchParams(e);a.set("token",r);const o=new URL(i);return o.protocol=o.protocol.replace(/^http/,"ws"),o.pathname=o.pathname.endsWith("/")?`${o.pathname}${p.ws.broadcast.pathname.substring(1)}`:`${o.pathname}${p.ws.broadcast.pathname}`,o.search=a.toString(),new $a(o,n)}async upload(e,n){const s=new FormData;return s.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(i=>s.append("file[]",i)),await this._request(p.api.asset.upload.pathname,p.api.asset.upload.method,s,n)}async getBlockAttrs(e,n){return await this._request(p.api.attr.getBlockAttrs.pathname,p.api.attr.getBlockAttrs.method,e,n)}async getBookmarkLabels(e){return await this._request(p.api.attr.getBookmarkLabels.pathname,p.api.attr.getBookmarkLabels.method,void 0,e)}async setBlockAttrs(e,n){return await this._request(p.api.attr.setBlockAttrs.pathname,p.api.attr.setBlockAttrs.method,e,n)}async appendBlock(e,n){return await this._request(p.api.block.appendBlock.pathname,p.api.block.appendBlock.method,e,n)}async deleteBlock(e,n){return await this._request(p.api.block.deleteBlock.pathname,p.api.block.deleteBlock.method,e,n)}async getBlockBreadcrumb(e,n){return await this._request(p.api.block.getBlockBreadcrumb.pathname,p.api.block.getBlockBreadcrumb.method,e,n)}async getBlockDOM(e,n){return await this._request(p.api.block.getBlockDOM.pathname,p.api.block.getBlockDOM.method,e,n)}async getBlockInfo(e,n){return await this._request(p.api.block.getBlockInfo.pathname,p.api.block.getBlockInfo.method,e,n)}async getBlockKramdown(e,n){return await this._request(p.api.block.getBlockKramdown.pathname,p.api.block.getBlockKramdown.method,e,n)}async getChildBlocks(e,n){return await this._request(p.api.block.getChildBlocks.pathname,p.api.block.getChildBlocks.method,e,n)}async getDocInfo(e,n){return await this._request(p.api.block.getDocInfo.pathname,p.api.block.getDocInfo.method,e,n)}async insertBlock(e,n){return await this._request(p.api.block.insertBlock.pathname,p.api.block.insertBlock.method,e,n)}async moveBlock(e,n){return await this._request(p.api.block.moveBlock.pathname,p.api.block.moveBlock.method,e,n)}async prependBlock(e,n){return await this._request(p.api.block.prependBlock.pathname,p.api.block.prependBlock.method,e,n)}async transferBlockRef(e,n){return await this._request(p.api.block.transferBlockRef.pathname,p.api.block.transferBlockRef.method,e,n)}async updateBlock(e,n){return await this._request(p.api.block.updateBlock.pathname,p.api.block.updateBlock.method,e,n)}async channels(e){return await this._request(p.api.broadcast.channels.pathname,p.api.broadcast.channels.method,void 0,e)}async getChannelInfo(e,n){return await this._request(p.api.broadcast.getChannelInfo.pathname,p.api.broadcast.getChannelInfo.method,e,n)}async postMessage(e,n){return await this._request(p.api.broadcast.postMessage.pathname,p.api.broadcast.postMessage.method,e,n)}async pandoc(e,n){return await this._request(p.api.convert.pandoc.pathname,p.api.convert.pandoc.method,e,n)}async exportResources(e,n){return await this._request(p.api.export.exportResources.pathname,p.api.export.exportResources.method,e,n)}async exportMdContent(e,n){return await this._request(p.api.export.exportMdContent.pathname,p.api.export.exportMdContent.method,e,n)}async getFile(e,n="text",s){return await this._request(p.api.file.getFile.pathname,p.api.file.getFile.method,e,s,!1,n)}async putFile(e,n){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const s=new FormData;for(const[i,r]of Object.entries(e))e.hasOwnProperty(i)&&(r instanceof Blob?s.append(i,r):s.append(i,String(r)));return await this._request(p.api.file.putFile.pathname,p.api.file.putFile.method,s,n)}async readDir(e,n){return await this._request(p.api.file.readDir.pathname,p.api.file.readDir.method,e,n)}async removeFile(e,n){return await this._request(p.api.file.removeFile.pathname,p.api.file.removeFile.method,e,n)}async renameFile(e,n){return await this._request(p.api.file.renameFile.pathname,p.api.file.renameFile.method,e,n)}async createDocWithMd(e,n){return await this._request(p.api.filetree.createDocWithMd.pathname,p.api.filetree.createDocWithMd.method,e,n)}async getDoc(e,n){return await this._request(p.api.filetree.getDoc.pathname,p.api.filetree.getDoc.method,e,n)}async getHPathByID(e,n){return await this._request(p.api.filetree.getHPathByID.pathname,p.api.filetree.getHPathByID.method,e,n)}async getHPathByPath(e,n){return await this._request(p.api.filetree.getHPathByPath.pathname,p.api.filetree.getHPathByPath.method,e,n)}async listDocsByPath(e,n){return await this._request(p.api.filetree.listDocsByPath.pathname,p.api.filetree.listDocsByPath.method,e,n)}async moveDocs(e,n){return await this._request(p.api.filetree.moveDocs.pathname,p.api.filetree.moveDocs.method,e,n)}async removeDoc(e,n){return await this._request(p.api.filetree.removeDoc.pathname,p.api.filetree.removeDoc.method,e,n)}async renameDoc(e,n){return await this._request(p.api.filetree.renameDoc.pathname,p.api.filetree.renameDoc.method,e,n)}async searchDocs(e,n){return await this._request(p.api.filetree.searchDocs.pathname,p.api.filetree.searchDocs.method,e,n)}async getDocHistoryContent(e,n){return await this._request(p.api.history.getDocHistoryContent.pathname,p.api.history.getDocHistoryContent.method,e,n)}async getHistoryItems(e,n){return await this._request(p.api.history.getHistoryItems.pathname,p.api.history.getHistoryItems.method,e,n)}async getShorthand(e,n){return await this._request(p.api.inbox.getShorthand.pathname,p.api.inbox.getShorthand.method,e,n)}async forwardProxy(e,n){return await this._request(p.api.network.forwardProxy.pathname,p.api.network.forwardProxy.method,e,n)}async closeNotebook(e,n){return await this._request(p.api.notebook.closeNotebook.pathname,p.api.notebook.closeNotebook.method,e,n)}async createNotebook(e,n){return await this._request(p.api.notebook.createNotebook.pathname,p.api.notebook.createNotebook.method,e,n)}async getNotebookConf(e,n){return await this._request(p.api.notebook.getNotebookConf.pathname,p.api.notebook.getNotebookConf.method,e,n)}async lsNotebooks(e){return await this._request(p.api.notebook.lsNotebooks.pathname,p.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,n){return await this._request(p.api.notebook.openNotebook.pathname,p.api.notebook.openNotebook.method,e,n)}async removeNotebook(e,n){return await this._request(p.api.notebook.removeNotebook.pathname,p.api.notebook.removeNotebook.method,e,n)}async renameNotebook(e,n){return await this._request(p.api.notebook.renameNotebook.pathname,p.api.notebook.renameNotebook.method,e,n)}async setNotebookConf(e,n){return await this._request(p.api.notebook.setNotebookConf.pathname,p.api.notebook.setNotebookConf.method,e,n)}async pushErrMsg(e,n){return await this._request(p.api.notification.pushErrMsg.pathname,p.api.notification.pushErrMsg.method,e,n)}async pushMsg(e,n){return await this._request(p.api.notification.pushMsg.pathname,p.api.notification.pushMsg.method,e,n)}async sql(e,n){return await this._request(p.api.query.sql.pathname,p.api.query.sql.method,e,n)}async openRepoSnapshotDoc(e,n){return await this._request(p.api.repo.openRepoSnapshotDoc.pathname,p.api.repo.openRepoSnapshotDoc.method,e,n)}async fullTextSearchBlock(e,n){return await this._request(p.api.search.fullTextSearchBlock.pathname,p.api.search.fullTextSearchBlock.method,e,n)}async getSnippet(e,n){return await this._request(p.api.snippet.getSnippet.pathname,p.api.snippet.getSnippet.method,e,n)}async setSnippet(e,n){return await this._request(p.api.snippet.setSnippet.pathname,p.api.snippet.setSnippet.method,e,n)}async getLocalStorage(e){return await this._request(p.api.storage.getLocalStorage.pathname,p.api.storage.getLocalStorage.method,void 0,e)}async getRecentDocs(e){return await this._request(p.api.storage.getRecentDocs.pathname,p.api.storage.getRecentDocs.method,void 0,e)}async setLocalStorage(e,n){return await this._request(p.api.storage.setLocalStorage.pathname,p.api.storage.setLocalStorage.method,e,n)}async bootProgress(e){return await this._request(p.api.system.bootProgress.pathname,p.api.system.bootProgress.method,void 0,e)}async getConf(e){return await this._request(p.api.system.getConf.pathname,p.api.system.getConf.method,void 0,e)}async currentTime(e){return await this._request(p.api.system.currentTime.pathname,p.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(p.api.system.version.pathname,p.api.system.version.method,void 0,e)}async render(e,n){return await this._request(p.api.template.render.pathname,p.api.template.render.method,e,n)}async renderSprig(e,n){return await this._request(p.api.template.renderSprig.pathname,p.api.template.renderSprig.method,e,n)}async _request(e,n,s,i,r=!0,a="json"){try{switch((i==null?void 0:i.type)??this._type){case"fetch":{const o=i==null?void 0:i.options;a=(()=>{switch(a){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return a}})();const l=await this._fetch(e,{method:n,body:s,responseType:a,onResponse:async u=>{switch(u.response.status){case st.Ok:break;case st.Accepted:e===p.api.file.getFile.pathname&&this._parseFetchResponse(u.response._data);break;default:break}},...o});return r&&a==="json"&&typeof l=="object"?this._parseFetchResponse(l):l}case"xhr":default:{const o=i==null?void 0:i.options;a=(()=>{switch(a){case"arrayBuffer":return"arraybuffer";default:return a}})();const l=await this._axios.request({url:e,method:n,data:s,responseType:a,...o});switch(l.status){case st.Ok:return r&&a==="json"&&typeof l.data=="object"?this._parseAxiosResponse(l):l.data;case st.Accepted:return e===p.api.file.getFile.pathname?this._parseAxiosResponse(l):l.data;default:throw new ar(l)}}}}catch(o){throw o}}_parseFetchResponse(e){if(e.code===0)return e;throw new $n(e)}_parseAxiosResponse(e){if(e.data.code===0)return e.data;throw new $n(e.data,e)}};pe(Rt,"ws",{broadcast:{pathname:"/ws/broadcast"}}),pe(Rt,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getLocalStorage:{pathname:"/api/storage/getLocalStorage",method:"POST"},getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"},setLocalStorage:{pathname:"/api/storage/setLocalStorage",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"},version:{pathname:"/api/system/version",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Ta=Rt;function Q(){}function Aa(t,e){for(const n in e)t[n]=e[n];return t}function Hs(t){return t()}function Vn(){return Object.create(null)}function Y(t){t.forEach(Hs)}function Ws(t){return typeof t=="function"}function we(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ea(t){return Object.keys(t).length===0}function me(t,e,n,s){if(t){const i=zs(t,e,n,s);return t[0](i)}}function zs(t,e,n,s){return t[1]&&s?Aa(n.ctx.slice(),t[1](s(e))):n.ctx}function de(t,e,n,s){if(t[2]&&s){const i=t[2](s(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],a=Math.max(e.dirty.length,i.length);for(let o=0;o<a;o+=1)r[o]=e.dirty[o]|i[o];return r}return e.dirty|i}return e.dirty}function ge(t,e,n,s,i,r){if(i){const a=zs(e,n,s,r);t.p(a,i)}}function _e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Oa(t){const e={};for(const n in t)e[n]=!0;return e}function D(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function I(t){return document.createElement(t)}function Pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function De(t){return document.createTextNode(t)}function R(){return De(" ")}function Qe(){return De("")}function z(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Hn(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Nt(t){return t===""?null:+t}function Ca(t){return Array.from(t.childNodes)}function Ks(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e){t.value=e??""}function He(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function Wn(t,e,n){for(let s=0;s<t.options.length;s+=1){const i=t.options[s];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Da(t){const e=t.querySelector(":checked");return e&&e.__value}function C(t,e,n){t.classList.toggle(e,!!n)}function Ra(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}class dt{constructor(e=!1){F(this,"is_svg",!1);F(this,"e");F(this,"n");F(this,"t");F(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,s=null){this.e||(this.is_svg?this.e=Pt(n.nodeName):this.e=I(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)L(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(N)}}let Je;function ze(t){Je=t}function Pa(){if(!Je)throw new Error("Function called outside component initialization");return Je}function Wt(){const t=Pa();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=Ra(e,n,{cancelable:s});return i.slice().forEach(a=>{a.call(t,r)}),!r.defaultPrevented}return!0}}const Be=[],zn=[];let je=[];const Kn=[],Na=Promise.resolve();let Bt=!1;function Ba(){Bt||(Bt=!0,Na.then(Gs))}function ct(t){je.push(t)}const vt=new Set;let Pe=0;function Gs(){if(Pe!==0)return;const t=Je;do{try{for(;Pe<Be.length;){const e=Be[Pe];Pe++,ze(e),La(e.$$)}}catch(e){throw Be.length=0,Pe=0,e}for(ze(null),Be.length=0,Pe=0;zn.length;)zn.pop()();for(let e=0;e<je.length;e+=1){const n=je[e];vt.has(n)||(vt.add(n),n())}je.length=0}while(Be.length);for(;Kn.length;)Kn.pop()();Bt=!1,vt.clear(),ze(t)}function La(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ct)}}function ja(t){const e=[],n=[];je.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),je=e}const ot=new Set;let Ee;function Oe(){Ee={r:0,c:[],p:Ee}}function Ce(){Ee.r||Y(Ee.c),Ee=Ee.p}function w(t,e){t&&t.i&&(ot.delete(t),t.i(e))}function y(t,e,n,s){if(t&&t.o){if(ot.has(t))return;ot.add(t),Ee.c.push(()=>{ot.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ia(t,e){t.d(1),e.delete(t.key)}function Js(t,e){y(t,1,1,()=>{e.delete(t.key)})}function zt(t,e,n,s,i,r,a,o,l,u,c,h){let b=t.length,f=r.length,m=b;const _={};for(;m--;)_[t[m].key]=m;const g=[],P=new Map,K=new Map,re=[];for(m=f;m--;){const E=h(i,r,m),G=n(E);let H=a.get(G);H?s&&re.push(()=>H.p(E,e)):(H=u(G,E),H.c()),P.set(G,g[m]=H),G in _&&K.set(G,Math.abs(m-_[G]))}const J=new Set,ee=new Set;function B(E){w(E,1),E.m(o,c),a.set(E.key,E),c=E.first,f--}for(;b&&f;){const E=g[f-1],G=t[b-1],H=E.key,ae=G.key;E===G?(c=E.first,b--,f--):P.has(ae)?!a.has(H)||J.has(H)?B(E):ee.has(ae)?b--:K.get(H)>K.get(ae)?(ee.add(H),B(E)):(J.add(ae),b--):(l(G,a),b--)}for(;b--;){const E=t[b];P.has(E.key)||l(E,a)}for(;f;)B(g[f-1]);return Y(re),g}function A(t){t&&t.c()}function $(t,e,n){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),ct(()=>{const r=t.$$.on_mount.map(Hs).filter(Ws);t.$$.on_destroy?t.$$.on_destroy.push(...r):Y(r),t.$$.on_mount=[]}),i.forEach(ct)}function T(t,e){const n=t.$$;n.fragment!==null&&(ja(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ma(t,e){t.$$.dirty[0]===-1&&(Be.push(t),Ba(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ke(t,e,n,s,i,r,a=null,o=[-1]){const l=Je;ze(t);const u=t.$$={fragment:null,ctx:[],props:r,update:Q,not_equal:i,bound:Vn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Vn(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,b,...f)=>{const m=f.length?f[0]:b;return u.ctx&&i(u.ctx[h],u.ctx[h]=m)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](m),c&&Ma(t,h)),b}):[],u.update(),c=!0,Y(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=Ca(e.target);u.fragment&&u.fragment.l(h),h.forEach(N)}else u.fragment&&u.fragment.c();e.intro&&w(t.$$.fragment),$(t,e.target,e.anchor),Gs()}ze(l)}class ye{constructor(){F(this,"$$");F(this,"$$set")}$destroy(){T(this,1),this.$destroy=Q}$on(e,n){if(!Ws(n))return Q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Ea(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ua="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ua);const Gn={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function Fa(t){let e,n;return{c(){e=Pt("svg"),n=Pt("use"),Hn(n,"xlink:href",t[0]),S(e,"style",t[3]),S(e,"data-id",t[1]),S(e,"class",t[2]),C(e,"popover__block",Gn.id.test(t[1]))},m(s,i){L(s,e,i),D(e,n)},p(s,[i]){i&1&&Hn(n,"xlink:href",s[0]),i&8&&S(e,"style",s[3]),i&2&&S(e,"data-id",s[1]),i&4&&S(e,"class",s[2]),i&6&&C(e,"popover__block",Gn.id.test(s[1]))},i:Q,o:Q,d(s){s&&N(e)}}}function qa(t,e,n){let{icon:s}=e,{id:i=""}=e,{className:r=""}=e,{style:a=""}=e;return t.$$set=o=>{"icon"in o&&n(0,s=o.icon),"id"in o&&n(1,i=o.id),"className"in o&&n(2,r=o.className),"style"in o&&n(3,a=o.style)},[s,i,r,a]}class Kt extends ye{constructor(e){super(),ke(this,e,qa,Fa,we,{icon:0,id:1,className:2,style:3})}}const Va=t=>({focus:t&1}),Jn=t=>({focus:t[0]});function Yn(t,e,n){const s=t.slice();return s[13]=e[n],s}function Zn(t){let e,n,s,i,r,a,o;return n=new Kt({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=I("div"),A(n.$$.fragment),s=R(),i=I("input"),S(i,"placeholder",t[4]),S(i,"class","b3-text-field fn__block b3-form__icon-input"),S(e,"class","b3-form__icon")},m(l,u){L(l,e,u),$(n,e,null),D(e,s),D(e,i),x(i,t[1]),r=!0,a||(o=[z(i,"input",t[9]),z(i,"change",t[5])],a=!0)},p(l,u){(!r||u&16)&&S(i,"placeholder",l[4]),u&2&&i.value!==l[1]&&x(i,l[1])},i(l){r||(w(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&N(e),T(n),a=!1,Y(o)}}}function Xn(t,e){let n,s,i,r,a=e[13].text+"",o,l,u,c,h;s=new Kt({props:{icon:e[13].icon,className:"b3-list-item__graphic"}});function b(){return e[10](e[13])}function f(){return e[11](e[13])}return{key:t,first:null,c(){n=I("li"),A(s.$$.fragment),i=R(),r=I("span"),o=R(),S(r,"class","b3-list-item__text svelte-15drd7h"),S(n,"role","button"),S(n,"data-name",l=e[13].name),S(n,"class","b3-list-item"),C(n,"b3-list-item--focus",e[13].key===e[0]),this.first=n},m(m,_){L(m,n,_),$(s,n,null),D(n,i),D(n,r),r.innerHTML=a,D(n,o),u=!0,c||(h=[z(n,"click",b),z(n,"keyup",f)],c=!0)},p(m,_){e=m;const g={};_&4&&(g.icon=e[13].icon),s.$set(g),(!u||_&4)&&a!==(a=e[13].text+"")&&(r.innerHTML=a),(!u||_&4&&l!==(l=e[13].name))&&S(n,"data-name",l),(!u||_&5)&&C(n,"b3-list-item--focus",e[13].key===e[0])},i(m){u||(w(s.$$.fragment,m),u=!0)},o(m){y(s.$$.fragment,m),u=!1},d(m){m&&N(n),T(s),c=!1,Y(h)}}}function Ha(t){let e;return{c(){e=De("Container")},m(n,s){L(n,e,s)},d(n){n&&N(e)}}}function Wa(t){let e,n,s,i=[],r=new Map,a,o,l,u=t[3]&&Zn(t),c=Ue(t[2]);const h=_=>_[13].key;for(let _=0;_<c.length;_+=1){let g=Yn(t,c,_),P=h(g);r.set(P,i[_]=Xn(P,g))}const b=t[8].default,f=me(b,t,t[7],Jn),m=f||Ha();return{c(){e=I("div"),n=I("ul"),u&&u.c(),s=R();for(let _=0;_<i.length;_+=1)i[_].c();a=R(),o=I("div"),m&&m.c(),S(n,"class","b3-tab-bar b3-list b3-list--background"),S(o,"class","config__tab-wrap"),S(e,"class","fn__flex-1 fn__flex config__panel")},m(_,g){L(_,e,g),D(e,n),u&&u.m(n,null),D(n,s);for(let P=0;P<i.length;P+=1)i[P]&&i[P].m(n,null);D(e,a),D(e,o),m&&m.m(o,null),l=!0},p(_,[g]){_[3]?u?(u.p(_,g),g&8&&w(u,1)):(u=Zn(_),u.c(),w(u,1),u.m(n,s)):u&&(Oe(),y(u,1,1,()=>{u=null}),Ce()),g&69&&(c=Ue(_[2]),Oe(),i=zt(i,g,h,1,_,c,r,n,Js,Xn,null,Yn),Ce()),f&&f.p&&(!l||g&129)&&ge(f,b,_,_[7],l?de(b,_[7],g,Va):_e(_[7]),Jn)},i(_){if(!l){w(u);for(let g=0;g<c.length;g+=1)w(i[g]);w(m,_),l=!0}},o(_){y(u);for(let g=0;g<i.length;g+=1)y(i[g]);y(m,_),l=!1},d(_){_&&N(e),u&&u.d();for(let g=0;g<i.length;g+=1)i[g].d();m&&m.d(_)}}}function za(t,e,n){let{$$slots:s={},$$scope:i}=e,{panels:r}=e,{focus:a}=e,{searchEnable:o=!1}=e,{searchPlaceholder:l=""}=e,{searchValue:u=""}=e;const c=Wt();function h(){c("search-changed",{value:u})}function b(g){c("changed",{key:g}),n(0,a=g)}function f(){u=this.value,n(1,u)}const m=g=>b(g.key),_=g=>b(g.key);return t.$$set=g=>{"panels"in g&&n(2,r=g.panels),"focus"in g&&n(0,a=g.focus),"searchEnable"in g&&n(3,o=g.searchEnable),"searchPlaceholder"in g&&n(4,l=g.searchPlaceholder),"searchValue"in g&&n(1,u=g.searchValue),"$$scope"in g&&n(7,i=g.$$scope)},[a,u,r,o,l,h,b,i,s,f,m,_]}class Ka extends ye{constructor(e){super(),ke(this,e,za,Wa,we,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function Ga(t){let e,n;const s=t[4].default,i=me(s,t,t[3],null);return{c(){e=I("div"),i&&i.c(),S(e,"data-name",t[2]),S(e,"class","config__tab-container"),C(e,"fn__none",!t[0]),C(e,"config__tab-container--top",t[1])},m(r,a){L(r,e,a),i&&i.m(e,null),n=!0},p(r,[a]){i&&i.p&&(!n||a&8)&&ge(i,s,r,r[3],n?de(s,r[3],a,null):_e(r[3]),null),(!n||a&4)&&S(e,"data-name",r[2]),(!n||a&1)&&C(e,"fn__none",!r[0]),(!n||a&2)&&C(e,"config__tab-container--top",r[1])},i(r){n||(w(i,r),n=!0)},o(r){y(i,r),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function Ja(t,e,n){let{$$slots:s={},$$scope:i}=e,{display:r=!0}=e,{top:a=!0}=e,{name:o=""}=e;return t.$$set=l=>{"display"in l&&n(0,r=l.display),"top"in l&&n(1,a=l.top),"name"in l&&n(2,o=l.name),"$$scope"in l&&n(3,i=l.$$scope)},[r,a,o,i,s]}class Qn extends ye{constructor(e){super(),ke(this,e,Ja,Ga,we,{display:0,top:1,name:2})}}const Ya=t=>({}),xn=t=>({}),Za=t=>({}),es=t=>({});function ts(t){let e,n;const s=t[7].icon,i=me(s,t,t[6],es);return{c(){e=I("span"),i&&i.c(),S(e,"class","item__icon")},m(r,a){L(r,e,a),i&&i.m(e,null),n=!0},p(r,a){i&&i.p&&(!n||a&64)&&ge(i,s,r,r[6],n?de(s,r[6],a,Za):_e(r[6]),es)},i(r){n||(w(i,r),n=!0)},o(r){y(i,r),n=!1},d(r){r&&N(e),i&&i.d(r)}}}function Xa(t){let e;return{c(){e=De("text")},m(n,s){L(n,e,s)},d(n){n&&N(e)}}}function Qa(t){let e,n,s,i,r,a,o,l,u,c,h=t[0]&&t[4].icon&&ts(t);const b=t[7].text,f=me(b,t,t[6],xn),m=f||Xa();return{c(){e=I("div"),n=I("span"),s=R(),h&&h.c(),i=R(),r=I("span"),m&&m.c(),a=R(),o=I("span"),S(n,"class","fn__flex-1"),S(r,"class","item__text"),S(o,"class","fn__flex-1"),S(e,"role","button"),S(e,"data-type",t[1]),S(e,"class","item item--full"),C(e,"item--focus",t[2])},m(_,g){L(_,e,g),D(e,n),D(e,s),h&&h.m(e,null),D(e,i),D(e,r),m&&m.m(r,null),D(e,a),D(e,o),l=!0,u||(c=z(e,"click",t[3]),u=!0)},p(_,[g]){_[0]&&_[4].icon?h?(h.p(_,g),g&17&&w(h,1)):(h=ts(_),h.c(),w(h,1),h.m(e,i)):h&&(Oe(),y(h,1,1,()=>{h=null}),Ce()),f&&f.p&&(!l||g&64)&&ge(f,b,_,_[6],l?de(b,_[6],g,Ya):_e(_[6]),xn),(!l||g&2)&&S(e,"data-type",_[1]),(!l||g&4)&&C(e,"item--focus",_[2])},i(_){l||(w(h),w(m,_),l=!0)},o(_){y(h),y(m,_),l=!1},d(_){_&&N(e),h&&h.d(),m&&m.d(_),u=!1,c()}}}function xa(t,e,n){let{$$slots:s={},$$scope:i}=e;const r=Oa(s);let{key:a}=e,{icon:o}=e,{name:l=""}=e,{focus:u=!1}=e;const c=Wt();function h(){u||c("changed",{key:a})}return t.$$set=b=>{"key"in b&&n(5,a=b.key),"icon"in b&&n(0,o=b.icon),"name"in b&&n(1,l=b.name),"focus"in b&&n(2,u=b.focus),"$$scope"in b&&n(6,i=b.$$scope)},[o,l,u,h,r,a,i,s]}class eo extends ye{constructor(e){super(),ke(this,e,xa,Qa,we,{key:5,icon:0,name:1,focus:2})}}const to=t=>({focus:t&1}),ns=t=>({focus:t[0]});function ss(t,e,n){const s=t.slice();return s[5]=e[n],s}function no(t){let e,n=t[5].icon+"",s;return{c(){e=new dt(!1),s=Qe(),e.a=s},m(i,r){e.m(n,i,r),L(i,s,r)},p(i,r){r&2&&n!==(n=i[5].icon+"")&&e.p(n)},i:Q,o:Q,d(i){i&&(N(s),e.d())}}}function so(t){let e,n;return e=new Kt({props:{icon:t[5].icon}}),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i&2&&(r.icon=s[5].icon),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function io(t){let e,n,s,i,r,a;const o=[so,no],l=[];function u(c,h){var b;return h&2&&(n=null),n==null&&(n=!!((b=c[5].icon)!=null&&b.startsWith("#"))),n?0:c[5].icon?1:-1}return~(s=u(t,-1))&&(i=l[s]=o[s](t)),{c(){e=I("span"),i&&i.c(),r=R(),S(e,"slot","icon")},m(c,h){L(c,e,h),~s&&l[s].m(e,null),D(e,r),a=!0},p(c,h){let b=s;s=u(c,h),s===b?~s&&l[s].p(c,h):(i&&(Oe(),y(l[b],1,1,()=>{l[b]=null}),Ce()),~s?(i=l[s],i?i.p(c,h):(i=l[s]=o[s](c),i.c()),w(i,1),i.m(e,r)):i=null)},i(c){a||(w(i),a=!0)},o(c){y(i),a=!1},d(c){c&&N(e),~s&&l[s].d()}}}function ro(t){let e,n,s=t[5].text+"",i;return{c(){e=I("span"),n=new dt(!1),i=R(),n.a=i,S(e,"slot","text")},m(r,a){L(r,e,a),n.m(s,e),D(e,i)},p(r,a){a&2&&s!==(s=r[5].text+"")&&n.p(s)},d(r){r&&N(e)}}}function is(t,e){let n,s,i;return s=new eo({props:{key:e[5].key,icon:!!e[5].icon,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[ro],icon:[io]},$$scope:{ctx:e}}}),s.$on("changed",e[2]),{key:t,first:null,c(){n=Qe(),A(s.$$.fragment),this.first=n},m(r,a){L(r,n,a),$(s,r,a),i=!0},p(r,a){e=r;const o={};a&2&&(o.key=e[5].key),a&2&&(o.icon=!!e[5].icon),a&2&&(o.name=e[5].name),a&3&&(o.focus=e[5].key===e[0]),a&18&&(o.$$scope={dirty:a,ctx:e}),s.$set(o)},i(r){i||(w(s.$$.fragment,r),i=!0)},o(r){y(s.$$.fragment,r),i=!1},d(r){r&&N(n),T(s,r)}}}function ao(t){let e;return{c(){e=De("Container")},m(n,s){L(n,e,s)},d(n){n&&N(e)}}}function oo(t){let e,n,s=[],i=new Map,r,a,o,l=Ue(t[1]);const u=f=>f[5].key;for(let f=0;f<l.length;f+=1){let m=ss(t,l,f),_=u(m);i.set(_,s[f]=is(_,m))}const c=t[3].default,h=me(c,t,t[4],ns),b=h||ao();return{c(){e=I("div"),n=I("div");for(let f=0;f<s.length;f+=1)s[f].c();r=R(),a=I("div"),b&&b.c(),S(n,"class","layout-tab-bar fn__flex"),S(a,"class","fn__flex-1"),S(e,"class","fn__flex-column"),He(e,"height","100%")},m(f,m){L(f,e,m),D(e,n);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(n,null);D(e,r),D(e,a),b&&b.m(a,null),o=!0},p(f,[m]){m&7&&(l=Ue(f[1]),Oe(),s=zt(s,m,u,1,f,l,i,n,Js,is,null,ss),Ce()),h&&h.p&&(!o||m&17)&&ge(h,c,f,f[4],o?de(c,f[4],m,to):_e(f[4]),ns)},i(f){if(!o){for(let m=0;m<l.length;m+=1)w(s[m]);w(b,f),o=!0}},o(f){for(let m=0;m<s.length;m+=1)y(s[m]);y(b,f),o=!1},d(f){f&&N(e);for(let m=0;m<s.length;m+=1)s[m].d();b&&b.d(f)}}}function lo(t,e,n){let{$$slots:s={},$$scope:i}=e,{tabs:r}=e,{focus:a}=e;function o(l){n(0,a=l.detail.key)}return t.$$set=l=>{"tabs"in l&&n(1,r=l.tabs),"focus"in l&&n(0,a=l.focus),"$$scope"in l&&n(4,i=l.$$scope)},[a,r,o,s,i]}class co extends ye{constructor(e){super(),ke(this,e,lo,oo,we,{tabs:1,focus:0})}}const uo=t=>({}),rs=t=>({}),fo=t=>({}),as=t=>({}),po=t=>({}),os=t=>({}),ho=t=>({}),ls=t=>({});function mo(t){let e,n;return{c(){e=new dt(!1),n=Qe(),e.a=n},m(s,i){e.m(t[0],s,i),L(s,n,i)},p(s,i){i&1&&e.p(s[0])},d(s){s&&(N(n),e.d())}}}function go(t){let e,n;return{c(){e=new dt(!1),n=Qe(),e.a=n},m(s,i){e.m(t[1],s,i),L(s,n,i)},p(s,i){i&2&&e.p(s[1])},d(s){s&&(N(n),e.d())}}}function cs(t){let e,n,s;const i=t[4].input,r=me(i,t,t[3],as);return{c(){e=I("div"),n=R(),r&&r.c(),S(e,"class","fn__hr")},m(a,o){L(a,e,o),L(a,n,o),r&&r.m(a,o),s=!0},p(a,o){r&&r.p&&(!s||o&8)&&ge(r,i,a,a[3],s?de(i,a[3],o,fo):_e(a[3]),as)},i(a){s||(w(r,a),s=!0)},o(a){y(r,a),s=!1},d(a){a&&(N(e),N(n)),r&&r.d(a)}}}function us(t){let e,n,s;const i=t[4].input,r=me(i,t,t[3],rs);return{c(){e=I("span"),n=R(),r&&r.c(),S(e,"class","fn__space")},m(a,o){L(a,e,o),L(a,n,o),r&&r.m(a,o),s=!0},p(a,o){r&&r.p&&(!s||o&8)&&ge(r,i,a,a[3],s?de(i,a[3],o,uo):_e(a[3]),rs)},i(a){s||(w(r,a),s=!0)},o(a){y(r,a),s=!1},d(a){a&&(N(e),N(n)),r&&r.d(a)}}}function _o(t){let e,n,s,i,r,a,o;const l=t[4].title,u=me(l,t,t[3],ls),c=u||mo(t),h=t[4].text,b=me(h,t,t[3],os),f=b||go(t);let m=t[2]&&cs(t),_=!t[2]&&us(t);return{c(){e=I("label"),n=I("div"),c&&c.c(),s=R(),i=I("div"),f&&f.c(),r=R(),m&&m.c(),a=R(),_&&_.c(),S(i,"class","b3-label__text"),S(n,"class","fn__flex-1 svelte-2m76cy"),C(n,"visible",t[2]),S(e,"class","fn__flex b3-label")},m(g,P){L(g,e,P),D(e,n),c&&c.m(n,null),D(n,s),D(n,i),f&&f.m(i,null),D(n,r),m&&m.m(n,null),D(e,a),_&&_.m(e,null),o=!0},p(g,[P]){u?u.p&&(!o||P&8)&&ge(u,l,g,g[3],o?de(l,g[3],P,ho):_e(g[3]),ls):c&&c.p&&(!o||P&1)&&c.p(g,o?P:-1),b?b.p&&(!o||P&8)&&ge(b,h,g,g[3],o?de(h,g[3],P,po):_e(g[3]),os):f&&f.p&&(!o||P&2)&&f.p(g,o?P:-1),g[2]?m?(m.p(g,P),P&4&&w(m,1)):(m=cs(g),m.c(),w(m,1),m.m(n,null)):m&&(Oe(),y(m,1,1,()=>{m=null}),Ce()),(!o||P&4)&&C(n,"visible",g[2]),g[2]?_&&(Oe(),y(_,1,1,()=>{_=null}),Ce()):_?(_.p(g,P),P&4&&w(_,1)):(_=us(g),_.c(),w(_,1),_.m(e,null))},i(g){o||(w(c,g),w(f,g),w(m),w(_),o=!0)},o(g){y(c,g),y(f,g),y(m),y(_),o=!1},d(g){g&&N(e),c&&c.d(g),f&&f.d(g),m&&m.d(),_&&_.d()}}}function bo(t,e,n){let{$$slots:s={},$$scope:i}=e,{title:r=""}=e,{text:a=""}=e,{block:o=!1}=e;return t.$$set=l=>{"title"in l&&n(0,r=l.title),"text"in l&&n(1,a=l.text),"block"in l&&n(2,o=l.block),"$$scope"in l&&n(3,i=l.$$scope)},[r,a,o,i,s]}class q extends ye{constructor(e){super(),ke(this,e,bo,_o,we,{title:0,text:1,block:2})}}var M=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(M||{});function fs(t,e,n){const s=t.slice();return s[20]=e[n],s}function wo(t){let e,n,s;return{c(){e=I("textarea"),e.disabled=t[2],S(e,"class","b3-text-field"),S(e,"placeholder",t[5]),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),He(e,"height",t[8]>0?`${t[8]}px`:void 0),He(e,"font-family",t[9]?t[9]:void 0)},m(i,r){L(i,e,r),x(e,t[0]),n||(s=[z(e,"input",t[18]),z(e,"change",t[11])],n=!0)},p(i,r){r&4&&(e.disabled=i[2]),r&32&&S(e,"placeholder",i[5]),r&65&&x(e,i[0]),r&8&&C(e,"fn__block",i[3]),r&24&&C(e,"fn__size200",!i[3]&&i[4]),r&256&&He(e,"height",i[8]>0?`${i[8]}px`:void 0),r&512&&He(e,"font-family",i[9]?i[9]:void 0)},d(i){i&&N(e),n=!1,Y(s)}}}function ko(t){let e,n=[],s=new Map,i,r,a=Ue(t[6]);const o=l=>l[20].key;for(let l=0;l<a.length;l+=1){let u=fs(t,a,l),c=o(u);s.set(c,n[l]=ps(c,u))}return{c(){e=I("select");for(let l=0;l<n.length;l+=1)n[l].c();e.disabled=t[2],S(e,"class","b3-select"),t[0]===void 0&&ct(()=>t[17].call(e)),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(l,u){L(l,e,u);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);Wn(e,t[0],!0),i||(r=[z(e,"change",t[17]),z(e,"change",t[11])],i=!0)},p(l,u){u&64&&(a=Ue(l[6]),n=zt(n,u,o,1,l,a,s,e,Ia,ps,null,fs)),u&4&&(e.disabled=l[2]),u&65&&Wn(e,l[0]),u&8&&C(e,"fn__block",l[3]),u&24&&C(e,"fn__size200",!l[3]&&l[4]),u&8&&C(e,"fn__flex-center",!l[3])},d(l){l&&N(e);for(let u=0;u<n.length;u+=1)n[u].d();i=!1,Y(r)}}}function yo(t){let e,n,s,i;return{c(){e=I("button"),n=De(t[0]),e.disabled=t[2],S(e,"class","b3-button b3-button--outline"),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(r,a){L(r,e,a),D(e,n),s||(i=z(e,"click",t[10]),s=!0)},p(r,a){a&1&&Ks(n,r[0]),a&4&&(e.disabled=r[2]),a&8&&C(e,"fn__block",r[3]),a&24&&C(e,"fn__size200",!r[3]&&r[4]),a&8&&C(e,"fn__flex-center",!r[3])},d(r){r&&N(e),s=!1,i()}}}function vo(t){let e,n,s,i,r,a;return{c(){e=I("input"),e.disabled=t[2],S(e,"class","b3-slider svelte-edt8og"),S(e,"type","range"),S(e,"min",n=t[7].min),S(e,"max",s=t[7].max),S(e,"step",i=t[7].step),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4])},m(o,l){L(o,e,l),x(e,t[0]),r||(a=[z(e,"change",t[16]),z(e,"input",t[16]),z(e,"change",t[11])],r=!0)},p(o,l){l&4&&(e.disabled=o[2]),l&128&&n!==(n=o[7].min)&&S(e,"min",n),l&128&&s!==(s=o[7].max)&&S(e,"max",s),l&128&&i!==(i=o[7].step)&&S(e,"step",i),l&65&&x(e,o[0]),l&8&&C(e,"fn__block",o[3]),l&24&&C(e,"fn__size200",!o[3]&&o[4])},d(o){o&&N(e),r=!1,Y(a)}}}function So(t){let e,n,s,i,r,a;return{c(){e=I("input"),e.disabled=t[2],S(e,"class","b3-text-field"),S(e,"type","number"),S(e,"placeholder",t[5]),S(e,"min",n=t[7].min),S(e,"max",s=t[7].max),S(e,"step",i=t[7].step),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(o,l){L(o,e,l),x(e,t[0]),r||(a=[z(e,"input",t[15]),z(e,"change",t[11])],r=!0)},p(o,l){l&4&&(e.disabled=o[2]),l&32&&S(e,"placeholder",o[5]),l&128&&n!==(n=o[7].min)&&S(e,"min",n),l&128&&s!==(s=o[7].max)&&S(e,"max",s),l&128&&i!==(i=o[7].step)&&S(e,"step",i),l&65&&Nt(e.value)!==o[0]&&x(e,o[0]),l&8&&C(e,"fn__block",o[3]),l&24&&C(e,"fn__size200",!o[3]&&o[4]),l&8&&C(e,"fn__flex-center",!o[3])},d(o){o&&N(e),r=!1,Y(a)}}}function $o(t){let e,n,s;return{c(){e=I("input"),e.disabled=t[2],S(e,"class","b3-text-field"),S(e,"placeholder",t[5]),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(i,r){L(i,e,r),x(e,t[0]),n||(s=[z(e,"input",t[14]),z(e,"change",t[11])],n=!0)},p(i,r){r&4&&(e.disabled=i[2]),r&32&&S(e,"placeholder",i[5]),r&65&&e.value!==i[0]&&x(e,i[0]),r&8&&C(e,"fn__block",i[3]),r&24&&C(e,"fn__size200",!i[3]&&i[4]),r&8&&C(e,"fn__flex-center",!i[3])},d(i){i&&N(e),n=!1,Y(s)}}}function To(t){let e,n,s;return{c(){e=I("input"),e.disabled=t[2],S(e,"class","b3-switch svelte-edt8og"),S(e,"type","checkbox"),C(e,"fn__block",t[3]),C(e,"fn__flex-center",!t[3])},m(i,r){L(i,e,r),e.checked=t[0],n||(s=[z(e,"change",t[13]),z(e,"change",t[11])],n=!0)},p(i,r){r&4&&(e.disabled=i[2]),r&65&&(e.checked=i[0]),r&8&&C(e,"fn__block",i[3]),r&8&&C(e,"fn__flex-center",!i[3])},d(i){i&&N(e),n=!1,Y(s)}}}function ps(t,e){let n,s=e[20].text+"",i,r;return{key:t,first:null,c(){n=I("option"),i=De(s),n.__value=r=e[20].key,x(n,n.__value),this.first=n},m(a,o){L(a,n,o),D(n,i)},p(a,o){e=a,o&64&&s!==(s=e[20].text+"")&&Ks(i,s),o&64&&r!==(r=e[20].key)&&(n.__value=r,x(n,n.__value))},d(a){a&&N(n)}}}function Ao(t){let e;function n(r,a){if(r[1]===M.checkbox)return To;if(r[1]===M.text)return $o;if(r[1]===M.number)return So;if(r[1]===M.slider)return vo;if(r[1]===M.button)return yo;if(r[1]===M.select)return ko;if(r[1]===M.textarea)return wo}let s=n(t),i=s&&s(t);return{c(){i&&i.c(),e=Qe()},m(r,a){i&&i.m(r,a),L(r,e,a)},p(r,[a]){s===(s=n(r))&&i?i.p(r,a):(i&&i.d(1),i=s&&s(r),i&&(i.c(),i.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&N(e),i&&i.d(r)}}}function Eo(t,e,n){let{type:s}=e,{settingKey:i}=e,{settingValue:r}=e,{disabled:a=!1}=e,{block:o=!1}=e,{normal:l=!0}=e,{placeholder:u=""}=e,{options:c=[]}=e,{limits:h={min:0,max:100,step:1}}=e,{height:b=0}=e,{fontFamily:f=""}=e;const m=Wt();function _(E){m("clicked",{event:E})}function g(E){m("changed",{key:i,value:r,event:E})}function P(){r=this.checked,n(0,r),n(6,c)}function K(){r=this.value,n(0,r),n(6,c)}function re(){r=Nt(this.value),n(0,r),n(6,c)}function J(){r=Nt(this.value),n(0,r),n(6,c)}function ee(){r=Da(this),n(0,r),n(6,c)}function B(){r=this.value,n(0,r),n(6,c)}return t.$$set=E=>{"type"in E&&n(1,s=E.type),"settingKey"in E&&n(12,i=E.settingKey),"settingValue"in E&&n(0,r=E.settingValue),"disabled"in E&&n(2,a=E.disabled),"block"in E&&n(3,o=E.block),"normal"in E&&n(4,l=E.normal),"placeholder"in E&&n(5,u=E.placeholder),"options"in E&&n(6,c=E.options),"limits"in E&&n(7,h=E.limits),"height"in E&&n(8,b=E.height),"fontFamily"in E&&n(9,f=E.fontFamily)},[r,s,a,o,l,u,c,h,b,f,_,g,i,P,K,re,J,ee,B]}class V extends ye{constructor(e){super(),ke(this,e,Eo,Ao,we,{type:1,settingKey:12,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8,fontFamily:9})}}function Oo(t,e,n="span"){return`<${n} class="${e}">${t}</${n}>`}function Lt(t){return Oo(t,"fn__code","code")}var U=(t=>(t.Coding="coding",t.Building="building",t.Indexing="indexing",t.Debugging="debugging",t.Browsing="browsing",t.RunningTests="running tests",t.WritingTests="writing tests",t.ManualTesting="manual testing",t.WritingDocs="writing docs",t.CodeReviewing="code reviewing",t.Researching="researching",t.Learning="learning",t.Designing="designing",t))(U||{});const Z={OFFLINE_CACHE_PATH:"temp/.wakatime/cache",WAKATIME_DEFAULT_API_URL:"https://wakatime.com/api/v1",WAKATIME_STATUS_BAR_PATHNAME:"users/current/statusbar/today",WAKATIME_HEARTBEATS_PATHNAME:"users/current/heartbeats",WAKATIME_HEARTBEATS_BULK:25,WAKATIME_CLIENT_NAME:"wakatime",WAKATIME_CLIENT_VERSION:"1.86.0",WAKATIME_EDITOR_NAME:"siyuan",WAKATIME_PLUGIN_NAME:"siyuan-wakatime",WAKATIME_DEFAULT_LANGUAGE:"Siyuan",WAKATIME_WORKER_FILE_NAME:"wakatime",WAKATIME_WORKER_BROADCAST_CHANNEL_NAME:"wakatime-worker",CACHE_CHECK_INTERVAL:5*60*1e3,CACHE_COMMIT_INTERVAL:1*1e3};function Co(t){let e,n;return e=new V({props:{slot:"input",type:M.button,settingKey:"cleanCache",settingValue:t[3].settings.generalSettings.cleanCache.text}}),e.$on("clicked",t[6]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p:Q,i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Do(t){let e,n;return e=new V({props:{slot:"input",type:M.button,settingKey:"Reset",settingValue:t[3].settings.generalSettings.reset.text}}),e.$on("clicked",t[5]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p:Q,i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Ro(t){let e,n,s,i;return e=new q({props:{title:t[3].settings.generalSettings.cleanCache.title,text:t[3].settings.generalSettings.cleanCache.description,$$slots:{input:[Co]},$$scope:{ctx:t}}}),s=new q({props:{title:t[3].settings.generalSettings.reset.title,text:t[3].settings.generalSettings.reset.description,$$slots:{input:[Do]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment),n=R(),A(s.$$.fragment)},m(r,a){$(e,r,a),L(r,n,a),$(s,r,a),i=!0},p(r,a){const o={};a[1]&64&&(o.$$scope={dirty:a,ctx:r}),e.$set(o);const l={};a[1]&64&&(l.$$scope={dirty:a,ctx:r}),s.$set(l)},i(r){i||(w(e.$$.fragment,r),w(s.$$.fragment,r),i=!0)},o(r){y(e.$$.fragment,r),y(s.$$.fragment,r),i=!1},d(r){r&&N(n),T(e,r),T(s,r)}}}function Po(t){let e,n;return e=new V({props:{slot:"input",type:M.checkbox,settingKey:"Heartbeats",settingValue:t[0].wakatime.heartbeats}}),e.$on("changed",t[12]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.heartbeats),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function No(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"project",settingValue:t[0].wakatime.project,placeholder:t[1].wakatimeDefaultProject}}),e.$on("changed",t[13]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.project),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultProject),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Bo(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"language",settingValue:t[0].wakatime.language,placeholder:t[1].wakatimeDefaultLanguage}}),e.$on("changed",t[14]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.language),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultLanguage),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Lo(t){let e,n;return e=new V({props:{slot:"input",type:M.number,settingKey:"interval",settingValue:t[0].wakatime.interval,limits:t[10]}}),e.$on("changed",t[15]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.interval),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function jo(t){let e,n;return e=new V({props:{slot:"input",type:M.select,settingKey:"view.category",settingValue:t[0].wakatime.view.category,options:t[11]}}),e.$on("changed",t[16]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.view.category),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Io(t){let e,n;return e=new V({props:{slot:"input",type:M.select,settingKey:"edit.category",settingValue:t[0].wakatime.edit.category,options:t[11]}}),e.$on("changed",t[17]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.edit.category),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Mo(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"system_name",settingValue:t[0].wakatime.system_name,placeholder:t[1].wakatimeDefaultSystemName}}),e.$on("changed",t[18]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.system_name),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultSystemName),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Uo(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"system_version",settingValue:t[0].wakatime.system_version,placeholder:t[1].wakatimeDefaultSystemVersion}}),e.$on("changed",t[19]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.system_version),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultSystemVersion),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Fo(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"system_arch",settingValue:t[0].wakatime.system_arch,placeholder:t[1].wakatimeDefaultSystemArch}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.system_arch),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultSystemArch),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function qo(t){let e,n;return e=new V({props:{slot:"input",type:M.textarea,settingKey:"useragent",settingValue:t[0].wakatime.useragent,placeholder:t[2],block:!0}}),e.$on("changed",t[21]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.useragent),i[0]&4&&(r.placeholder=s[2]),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Vo(t){let e,n;return e=new V({props:{slot:"input",type:M.button,settingKey:"Test",settingValue:t[3].settings.wakatimeSettings.serviceTab.test.text}}),e.$on("clicked",t[7]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p:Q,i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Ho(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"api_url",settingValue:t[0].wakatime.api_url,placeholder:t[1].wakatimeDefaultApiUrl,block:!0}}),e.$on("changed",t[22]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.api_url),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultApiUrl),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Wo(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"api_key",settingValue:t[0].wakatime.api_key,placeholder:"API KEY",block:!0}}),e.$on("changed",t[23]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.api_key),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function zo(t){let e,n;return e=new V({props:{slot:"input",type:M.text,settingKey:"hostname",settingValue:t[0].wakatime.hostname,placeholder:t[1].wakatimeDefaultHostname}}),e.$on("changed",t[24]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.hostname),i[0]&2&&(r.placeholder=s[1].wakatimeDefaultHostname),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Ko(t){let e,n;return e=new V({props:{slot:"input",type:M.number,settingKey:"timeout",settingValue:t[0].wakatime.timeout,limits:t[10]}}),e.$on("changed",t[25]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.timeout),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Go(t){let e,n;return e=new V({props:{slot:"input",type:M.checkbox,settingKey:"hide_branch_names",settingValue:t[0].wakatime.hide_branch_names}}),e.$on("changed",t[26]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.hide_branch_names),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Jo(t){let e,n;return e=new V({props:{slot:"input",type:M.checkbox,settingKey:"hide_file_names",settingValue:t[0].wakatime.hide_file_names}}),e.$on("changed",t[27]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.hide_file_names),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Yo(t){let e,n;return e=new V({props:{slot:"input",type:M.checkbox,settingKey:"offline",settingValue:t[0].wakatime.offline}}),e.$on("changed",t[28]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.offline),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Zo(t){let e,n;return e=new V({props:{slot:"input",type:M.textarea,settingKey:"includeID",settingValue:t[0].wakatime.includeID.join(`
`),placeholder:t[3].settings.wakatimeSettings.serviceTab.includeID.placeholder,block:!0}}),e.$on("changed",t[29]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.includeID.join(`
`)),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Xo(t){let e,n;return e=new V({props:{slot:"input",type:M.textarea,settingKey:"excludeID",settingValue:t[0].wakatime.excludeID.join(`
`),placeholder:t[3].settings.wakatimeSettings.serviceTab.excludeID.placeholder,block:!0}}),e.$on("changed",t[30]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.excludeID.join(`
`)),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function Qo(t){let e,n;return e=new V({props:{slot:"input",type:M.textarea,settingKey:"include",settingValue:t[0].wakatime.include.join(`
`),placeholder:t[3].settings.wakatimeSettings.serviceTab.include.placeholder,block:!0}}),e.$on("changed",t[31]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.include.join(`
`)),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function xo(t){let e,n;return e=new V({props:{slot:"input",type:M.textarea,settingKey:"exclude",settingValue:t[0].wakatime.exclude.join(`
`),placeholder:t[3].settings.wakatimeSettings.serviceTab.exclude.placeholder,block:!0}}),e.$on("changed",t[32]),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&1&&(r.settingValue=s[0].wakatime.exclude.join(`
`)),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function el(t){let e,n,s,i,r,a,o,l,u,c,h,b,f,m,_,g,P,K,re,J,ee,B,E,G,H,ae,oe,xe,le,et,ce,tt,ue,nt,fe,O,ve,Jt,Se,Yt,$e,Zt,Te,Xt,Ae,Re;return n=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.heartbeats.title,text:t[3].settings.wakatimeSettings.generalTab.heartbeats.description,$$slots:{input:[Po]},$$scope:{ctx:t}}}),i=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.project.title,text:t[3].settings.wakatimeSettings.generalTab.project.description,$$slots:{input:[No]},$$scope:{ctx:t}}}),a=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.language.title,text:t[3].settings.wakatimeSettings.generalTab.language.description,$$slots:{input:[Bo]},$$scope:{ctx:t}}}),l=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.interval.title,text:t[3].settings.wakatimeSettings.generalTab.interval.description,$$slots:{input:[Lo]},$$scope:{ctx:t}}}),c=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.viewCategory.title,text:t[3].settings.wakatimeSettings.generalTab.viewCategory.description,$$slots:{input:[jo]},$$scope:{ctx:t}}}),b=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.editCategory.title,text:t[3].settings.wakatimeSettings.generalTab.editCategory.description,$$slots:{input:[Io]},$$scope:{ctx:t}}}),m=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.systemName.title,text:t[3].settings.wakatimeSettings.generalTab.systemName.description,$$slots:{input:[Mo]},$$scope:{ctx:t}}}),g=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.systemVersion.title,text:t[3].settings.wakatimeSettings.generalTab.systemVersion.description,$$slots:{input:[Uo]},$$scope:{ctx:t}}}),K=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.systemArch.title,text:t[3].settings.wakatimeSettings.generalTab.systemArch.description,$$slots:{input:[Fo]},$$scope:{ctx:t}}}),J=new q({props:{title:t[3].settings.wakatimeSettings.generalTab.userAgent.title,text:t[3].settings.wakatimeSettings.generalTab.userAgent.description,block:!0,$$slots:{input:[qo]},$$scope:{ctx:t}}}),E=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.test.title,text:t[3].settings.wakatimeSettings.serviceTab.test.description,$$slots:{input:[Vo]},$$scope:{ctx:t}}}),H=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.apiURL.title,text:t[3].settings.wakatimeSettings.serviceTab.apiURL.description,block:!0,$$slots:{input:[Ho]},$$scope:{ctx:t}}}),oe=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.apiKey.title,text:t[3].settings.wakatimeSettings.serviceTab.apiKey.description,block:!0,$$slots:{input:[Wo]},$$scope:{ctx:t}}}),le=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.hostname.title,text:t[3].settings.wakatimeSettings.serviceTab.hostname.description,$$slots:{input:[zo]},$$scope:{ctx:t}}}),ce=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.timeout.title,text:t[3].settings.wakatimeSettings.serviceTab.timeout.description,$$slots:{input:[Ko]},$$scope:{ctx:t}}}),ue=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.hide_branch_names.title,text:t[3].settings.wakatimeSettings.serviceTab.hide_branch_names.description,$$slots:{input:[Go]},$$scope:{ctx:t}}}),fe=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.hide_file_names.title,text:t[3].settings.wakatimeSettings.serviceTab.hide_file_names.description,$$slots:{input:[Jo]},$$scope:{ctx:t}}}),ve=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.offline.title,text:t[3].settings.wakatimeSettings.serviceTab.offline.description.replaceAll("${1}",Lt(Z.OFFLINE_CACHE_PATH)),$$slots:{input:[Yo]},$$scope:{ctx:t}}}),Se=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.includeID.title,text:t[3].settings.wakatimeSettings.serviceTab.includeID.description,block:!0,$$slots:{input:[Zo]},$$scope:{ctx:t}}}),$e=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.excludeID.title,text:t[3].settings.wakatimeSettings.serviceTab.excludeID.description,block:!0,$$slots:{input:[Xo]},$$scope:{ctx:t}}}),Te=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.include.title,text:t[3].settings.wakatimeSettings.serviceTab.include.description,block:!0,$$slots:{input:[Qo]},$$scope:{ctx:t}}}),Ae=new q({props:{title:t[3].settings.wakatimeSettings.serviceTab.exclude.title,text:t[3].settings.wakatimeSettings.serviceTab.exclude.description,block:!0,$$slots:{input:[xo]},$$scope:{ctx:t}}}),{c(){e=I("div"),A(n.$$.fragment),s=R(),A(i.$$.fragment),r=R(),A(a.$$.fragment),o=R(),A(l.$$.fragment),u=R(),A(c.$$.fragment),h=R(),A(b.$$.fragment),f=R(),A(m.$$.fragment),_=R(),A(g.$$.fragment),P=R(),A(K.$$.fragment),re=R(),A(J.$$.fragment),ee=R(),B=I("div"),A(E.$$.fragment),G=R(),A(H.$$.fragment),ae=R(),A(oe.$$.fragment),xe=R(),A(le.$$.fragment),et=R(),A(ce.$$.fragment),tt=R(),A(ue.$$.fragment),nt=R(),A(fe.$$.fragment),O=R(),A(ve.$$.fragment),Jt=R(),A(Se.$$.fragment),Yt=R(),A($e.$$.fragment),Zt=R(),A(Te.$$.fragment),Xt=R(),A(Ae.$$.fragment),S(e,"data-type",t[9].wakatime[0].name),C(e,"fn__none",t[9].wakatime[0].key!==t[36]),S(B,"data-type",t[9].wakatime[1].name),C(B,"fn__none",t[9].wakatime[1].key!==t[36])},m(k,v){L(k,e,v),$(n,e,null),D(e,s),$(i,e,null),D(e,r),$(a,e,null),D(e,o),$(l,e,null),D(e,u),$(c,e,null),D(e,h),$(b,e,null),D(e,f),$(m,e,null),D(e,_),$(g,e,null),D(e,P),$(K,e,null),D(e,re),$(J,e,null),L(k,ee,v),L(k,B,v),$(E,B,null),D(B,G),$(H,B,null),D(B,ae),$(oe,B,null),D(B,xe),$(le,B,null),D(B,et),$(ce,B,null),D(B,tt),$(ue,B,null),D(B,nt),$(fe,B,null),D(B,O),$(ve,B,null),D(B,Jt),$(Se,B,null),D(B,Yt),$($e,B,null),D(B,Zt),$(Te,B,null),D(B,Xt),$(Ae,B,null),Re=!0},p(k,v){const Qt={};v[0]&1|v[1]&64&&(Qt.$$scope={dirty:v,ctx:k}),n.$set(Qt);const xt={};v[0]&3|v[1]&64&&(xt.$$scope={dirty:v,ctx:k}),i.$set(xt);const en={};v[0]&3|v[1]&64&&(en.$$scope={dirty:v,ctx:k}),a.$set(en);const tn={};v[0]&1|v[1]&64&&(tn.$$scope={dirty:v,ctx:k}),l.$set(tn);const nn={};v[0]&1|v[1]&64&&(nn.$$scope={dirty:v,ctx:k}),c.$set(nn);const sn={};v[0]&1|v[1]&64&&(sn.$$scope={dirty:v,ctx:k}),b.$set(sn);const rn={};v[0]&3|v[1]&64&&(rn.$$scope={dirty:v,ctx:k}),m.$set(rn);const an={};v[0]&3|v[1]&64&&(an.$$scope={dirty:v,ctx:k}),g.$set(an);const on={};v[0]&3|v[1]&64&&(on.$$scope={dirty:v,ctx:k}),K.$set(on);const ln={};v[0]&5|v[1]&64&&(ln.$$scope={dirty:v,ctx:k}),J.$set(ln),(!Re||v[0]&512|v[1]&32)&&C(e,"fn__none",k[9].wakatime[0].key!==k[36]);const cn={};v[1]&64&&(cn.$$scope={dirty:v,ctx:k}),E.$set(cn);const un={};v[0]&3|v[1]&64&&(un.$$scope={dirty:v,ctx:k}),H.$set(un);const fn={};v[0]&1|v[1]&64&&(fn.$$scope={dirty:v,ctx:k}),oe.$set(fn);const pn={};v[0]&3|v[1]&64&&(pn.$$scope={dirty:v,ctx:k}),le.$set(pn);const hn={};v[0]&1|v[1]&64&&(hn.$$scope={dirty:v,ctx:k}),ce.$set(hn);const mn={};v[0]&1|v[1]&64&&(mn.$$scope={dirty:v,ctx:k}),ue.$set(mn);const dn={};v[0]&1|v[1]&64&&(dn.$$scope={dirty:v,ctx:k}),fe.$set(dn);const gn={};v[0]&1|v[1]&64&&(gn.$$scope={dirty:v,ctx:k}),ve.$set(gn);const _n={};v[0]&1|v[1]&64&&(_n.$$scope={dirty:v,ctx:k}),Se.$set(_n);const bn={};v[0]&1|v[1]&64&&(bn.$$scope={dirty:v,ctx:k}),$e.$set(bn);const wn={};v[0]&1|v[1]&64&&(wn.$$scope={dirty:v,ctx:k}),Te.$set(wn);const kn={};v[0]&1|v[1]&64&&(kn.$$scope={dirty:v,ctx:k}),Ae.$set(kn),(!Re||v[0]&512|v[1]&32)&&C(B,"fn__none",k[9].wakatime[1].key!==k[36])},i(k){Re||(w(n.$$.fragment,k),w(i.$$.fragment,k),w(a.$$.fragment,k),w(l.$$.fragment,k),w(c.$$.fragment,k),w(b.$$.fragment,k),w(m.$$.fragment,k),w(g.$$.fragment,k),w(K.$$.fragment,k),w(J.$$.fragment,k),w(E.$$.fragment,k),w(H.$$.fragment,k),w(oe.$$.fragment,k),w(le.$$.fragment,k),w(ce.$$.fragment,k),w(ue.$$.fragment,k),w(fe.$$.fragment,k),w(ve.$$.fragment,k),w(Se.$$.fragment,k),w($e.$$.fragment,k),w(Te.$$.fragment,k),w(Ae.$$.fragment,k),Re=!0)},o(k){y(n.$$.fragment,k),y(i.$$.fragment,k),y(a.$$.fragment,k),y(l.$$.fragment,k),y(c.$$.fragment,k),y(b.$$.fragment,k),y(m.$$.fragment,k),y(g.$$.fragment,k),y(K.$$.fragment,k),y(J.$$.fragment,k),y(E.$$.fragment,k),y(H.$$.fragment,k),y(oe.$$.fragment,k),y(le.$$.fragment,k),y(ce.$$.fragment,k),y(ue.$$.fragment,k),y(fe.$$.fragment,k),y(ve.$$.fragment,k),y(Se.$$.fragment,k),y($e.$$.fragment,k),y(Te.$$.fragment,k),y(Ae.$$.fragment,k),Re=!1},d(k){k&&(N(e),N(ee),N(B)),T(n),T(i),T(a),T(l),T(c),T(b),T(m),T(g),T(K),T(J),T(E),T(H),T(oe),T(le),T(ce),T(ue),T(fe),T(ve),T(Se),T($e),T(Te),T(Ae)}}}function tl(t){let e,n;return e=new co({props:{focus:rl,tabs:t[9].wakatime,$$slots:{default:[el,({focus:s})=>({36:s}),({focus:s})=>[0,s?32:0]]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&7|i[1]&96&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}function nl(t){let e,n,s,i;return e=new Qn({props:{display:t[8][0].key===t[35],$$slots:{default:[Ro]},$$scope:{ctx:t}}}),s=new Qn({props:{display:t[8][1].key===t[35],$$slots:{default:[tl]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment),n=R(),A(s.$$.fragment)},m(r,a){$(e,r,a),L(r,n,a),$(s,r,a),i=!0},p(r,a){const o={};a[1]&16&&(o.display=r[8][0].key===r[35]),a[1]&64&&(o.$$scope={dirty:a,ctx:r}),e.$set(o);const l={};a[1]&16&&(l.display=r[8][1].key===r[35]),a[0]&7|a[1]&64&&(l.$$scope={dirty:a,ctx:r}),s.$set(l)},i(r){i||(w(e.$$.fragment,r),w(s.$$.fragment,r),i=!0)},o(r){y(e.$$.fragment,r),y(s.$$.fragment,r),i=!1},d(r){r&&N(n),T(e,r),T(s,r)}}}function sl(t){let e,n;return e=new Ka({props:{panels:t[8],focus:il,$$slots:{default:[nl,({focus:s})=>({35:s}),({focus:s})=>[0,s?16:0]]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(s,i){$(e,s,i),n=!0},p(s,i){const r={};i[0]&7|i[1]&80&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){T(e,s)}}}let il=0,rl=0;function al(t,e,n){let{config:s}=e,{plugin:i}=e,r=i.wakatimeDefaultUserAgent;const a=i.i18n;async function o(){await i.updateConfig(s),n(2,r=i.wakatimeDefaultUserAgent)}function l(){i.siyuan.confirm(a.settings.generalSettings.reset.title,a.settings.generalSettings.reset.description,async()=>{await i.resetConfig(),globalThis.location.reload()})}function u(){i.siyuan.confirm(a.settings.generalSettings.cleanCache.title,a.settings.generalSettings.cleanCache.description,async()=>{await i.clearCache(),globalThis.location.reload()})}async function c(){const O=await i.testService();return O?i.siyuan.showMessage(a.settings.wakatimeSettings.serviceTab.test.messages.success.replaceAll("${1}",Lt(i.wakatimeApiBaseUrl)),void 0,"info"):i.siyuan.showMessage(a.settings.wakatimeSettings.serviceTab.test.messages.error.replaceAll("${1}",Lt(i.wakatimeApiBaseUrl)),void 0,"error"),O}const h=[{key:0,text:a.settings.generalSettings.title,name:a.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:a.settings.wakatimeSettings.title,name:a.settings.wakatimeSettings.title,icon:"#icon-wakatime"}],b={wakatime:[{key:0,text:a.settings.wakatimeSettings.generalTab.title,name:a.settings.wakatimeSettings.generalTab.title,icon:"⚙"},{key:1,text:a.settings.wakatimeSettings.serviceTab.title,name:a.settings.wakatimeSettings.serviceTab.title,icon:"🌐"}]},f={min:1,max:1/0,step:1},m=[{key:U.Coding,text:U.Coding},{key:U.Building,text:U.Building},{key:U.Indexing,text:U.Indexing},{key:U.Debugging,text:U.Debugging},{key:U.Browsing,text:U.Browsing},{key:U.RunningTests,text:U.RunningTests},{key:U.WritingTests,text:U.WritingTests},{key:U.ManualTesting,text:U.ManualTesting},{key:U.WritingDocs,text:U.WritingDocs},{key:U.CodeReviewing,text:U.CodeReviewing},{key:U.Researching,text:U.Researching},{key:U.Learning,text:U.Learning},{key:U.Designing,text:U.Designing}],_=async O=>{n(0,s.wakatime.heartbeats=O.detail.value,s),await o()},g=async O=>{n(0,s.wakatime.project=O.detail.value,s),await o()},P=async O=>{n(0,s.wakatime.language=O.detail.value,s),await o()},K=async O=>{n(0,s.wakatime.interval=O.detail.value,s),await o()},re=async O=>{n(0,s.wakatime.view.category=O.detail.value,s),await o()},J=async O=>{n(0,s.wakatime.edit.category=O.detail.value,s),await o()},ee=async O=>{n(0,s.wakatime.system_name=O.detail.value,s),await o()},B=async O=>{n(0,s.wakatime.system_version=O.detail.value,s),await o()},E=async O=>{n(0,s.wakatime.system_arch=O.detail.value,s),await o()},G=async O=>{n(0,s.wakatime.useragent=O.detail.value,s),await o()},H=async O=>{n(0,s.wakatime.api_url=O.detail.value,s),await o(),await c()},ae=async O=>{n(0,s.wakatime.api_key=O.detail.value,s),await o(),await c()},oe=async O=>{n(0,s.wakatime.hostname=O.detail.value,s),await o()},xe=async O=>{n(0,s.wakatime.timeout=O.detail.value,s),await o()},le=async O=>{n(0,s.wakatime.hide_branch_names=O.detail.value,s),await o()},et=async O=>{n(0,s.wakatime.hide_file_names=O.detail.value,s),await o()},ce=async O=>{n(0,s.wakatime.offline=O.detail.value,s),await o()},tt=async O=>{n(0,s.wakatime.includeID=O.detail.value.split(`
`),s),await o()},ue=async O=>{n(0,s.wakatime.excludeID=O.detail.value.split(`
`),s),await o()},nt=async O=>{n(0,s.wakatime.include=O.detail.value.split(`
`),s),await o()},fe=async O=>{n(0,s.wakatime.exclude=O.detail.value.split(`
`),s),await o()};return t.$$set=O=>{"config"in O&&n(0,s=O.config),"plugin"in O&&n(1,i=O.plugin)},[s,i,r,a,o,l,u,c,h,b,f,m,_,g,P,K,re,J,ee,B,E,G,H,ae,oe,xe,le,et,ce,tt,ue,nt,fe]}class ol extends ye{constructor(e){super(),ke(this,e,al,sl,we,{config:0,plugin:1},null,[-1,-1])}}ll();ul();const hs=cl();function ll(){switch(Le.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function cl(){switch(Le.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function ul(){switch(Le.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class fl{constructor(e,n=!0){this.label=e,this.collapsed=n}stdout(e,n,...s){const i=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(i):globalThis.console.group(i),n)for(const r of s)Array.isArray(r)?e(...r):e(r);else e(...s);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,!1,...e)}dirs(...e){this.stdout(globalThis.console.dir,!0,...e)}table(...e){this.stdout(globalThis.console.table,!1,...e)}tables(...e){this.stdout(globalThis.console.table,!0,...e)}debug(...e){this.stdout(globalThis.console.debug,!1,...e)}debugs(...e){this.stdout(globalThis.console.debug,!0,...e)}info(...e){this.stdout(globalThis.console.info,!1,...e)}infos(...e){this.stdout(globalThis.console.info,!0,...e)}log(...e){this.stdout(globalThis.console.log,!1,...e)}logs(...e){this.stdout(globalThis.console.log,!0,...e)}warn(...e){this.stdout(globalThis.console.warn,!1,...e)}warns(...e){this.stdout(globalThis.console.warn,!0,...e)}error(...e){this.stdout(globalThis.console.error,!1,...e)}errors(...e){this.stdout(globalThis.console.error,!0,...e)}}function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pl=function(e){return hl(e)&&!ml(e)};function hl(t){return!!t&&typeof t=="object"}function ml(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||_l(t)}var dl=typeof Symbol=="function"&&Symbol.for,gl=dl?Symbol.for("react.element"):60103;function _l(t){return t.$$typeof===gl}function bl(t){return Array.isArray(t)?[]:{}}function Ye(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Fe(bl(t),t,e):t}function wl(t,e,n){return t.concat(e).map(function(s){return Ye(s,n)})}function kl(t,e){if(!e.customMerge)return Fe;var n=e.customMerge(t);return typeof n=="function"?n:Fe}function yl(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function ms(t){return Object.keys(t).concat(yl(t))}function Ys(t,e){try{return e in t}catch{return!1}}function vl(t,e){return Ys(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Sl(t,e,n){var s={};return n.isMergeableObject(t)&&ms(t).forEach(function(i){s[i]=Ye(t[i],n)}),ms(e).forEach(function(i){vl(t,i)||(Ys(t,i)&&n.isMergeableObject(e[i])?s[i]=kl(i,n)(t[i],e[i],n):s[i]=Ye(e[i],n))}),s}function Fe(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||wl,n.isMergeableObject=n.isMergeableObject||pl,n.cloneUnlessOtherwiseSpecified=Ye;var s=Array.isArray(e),i=Array.isArray(t),r=s===i;return r?s?n.arrayMerge(t,e,n):Sl(t,e,n):Ye(e,n)}Fe.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(s,i){return Fe(s,i,n)},{})};var $l=Fe,Tl=$l;const Al=Gt(Tl);function ds(...t){return Al.all(t,{arrayMerge:(e,n,s)=>n})}function ne(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function gs(t,e){for(var n="",s=0,i=-1,r=0,a,o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||r===1))if(i!==o-1&&r===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",s=0):(n=n.slice(0,l),s=n.length-1-n.lastIndexOf("/")),i=o,r=0;continue}}else if(n.length===2||n.length===1){n="",s=0,i=o,r=0;continue}}e&&(n.length>0?n+="/..":n="..",s=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),s=o-i-1;i=o,r=0}else a===46&&r!==-1?++r:r=-1}return n}function El(t,e){var n=e.dir||e.root,s=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+s:n+t+s:s}var Ie={resolve:function(){for(var e="",n=!1,s,i=arguments.length-1;i>=-1&&!n;i--){var r;i>=0?r=arguments[i]:(s===void 0&&(s=process.cwd()),r=s),ne(r),r.length!==0&&(e=r+"/"+e,n=r.charCodeAt(0)===47)}return e=gs(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(ne(e),e.length===0)return".";var n=e.charCodeAt(0)===47,s=e.charCodeAt(e.length-1)===47;return e=gs(e,!n),e.length===0&&!n&&(e="."),e.length>0&&s&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return ne(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var s=arguments[n];ne(s),s.length>0&&(e===void 0?e=s:e+="/"+s)}return e===void 0?".":Ie.normalize(e)},relative:function(e,n){if(ne(e),ne(n),e===n||(e=Ie.resolve(e),n=Ie.resolve(n),e===n))return"";for(var s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var i=e.length,r=i-s,a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var o=n.length,l=o-a,u=r<l?r:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(n.charCodeAt(a+h)===47)return n.slice(a+h+1);if(h===0)return n.slice(a+h)}else r>u&&(e.charCodeAt(s+h)===47?c=h:h===0&&(c=0));break}var b=e.charCodeAt(s+h),f=n.charCodeAt(a+h);if(b!==f)break;b===47&&(c=h)}var m="";for(h=s+c+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+n.slice(a+c):(a+=c,n.charCodeAt(a)===47&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(ne(e),e.length===0)return".";for(var n=e.charCodeAt(0),s=n===47,i=-1,r=!0,a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===47){if(!r){i=a;break}}else r=!1;return i===-1?s?"/":".":s&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ne(e);var s=0,i=-1,r=!0,a;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var o=n.length-1,l=-1;for(a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!r){s=a+1;break}}else l===-1&&(r=!1,l=a+1),o>=0&&(u===n.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=l))}return s===i?i=l:i===-1&&(i=e.length),e.slice(s,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!r){s=a+1;break}}else i===-1&&(r=!1,i=a+1);return i===-1?"":e.slice(s,i)}},extname:function(e){ne(e);for(var n=-1,s=0,i=-1,r=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!r){s=o+1;break}continue}i===-1&&(r=!1,i=o+1),l===46?n===-1?n=o:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===s+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return El("/",e)},parse:function(e){ne(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var s=e.charCodeAt(0),i=s===47,r;i?(n.root="/",r=1):r=0;for(var a=-1,o=0,l=-1,u=!0,c=e.length-1,h=0;c>=r;--c){if(s=e.charCodeAt(c),s===47){if(!u){o=c+1;break}continue}l===-1&&(u=!1,l=c+1),s===46?a===-1?a=c:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||l===-1||h===0||h===1&&a===l-1&&a===o+1?l!==-1&&(o===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(o===0&&i?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(o,a),n.base=e.slice(o,l)),n.ext=e.slice(a,l)),o>0?n.dir=e.slice(0,o-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};Ie.posix=Ie;var Ol=Ie;const Cl=Gt(Ol);function Dl(t){return Cl.parse(t)}/*!
 * normalize-path <https://github.com/jonschlinkert/normalize-path>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */var Rl=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var n=t.length;if(n<=1)return t;var s="";if(n>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),s="//")}var r=t.split(/[/\\]+/);return e!==!1&&r[r.length-1]===""&&r.pop(),s+r.join("/")};const Pl=Gt(Rl);class Nl{constructor(e,n,s,i){F(this,"map",new Map);F(this,"counter",Math.random());F(this,"errerEventListener",async e=>{this.logger.warn(e)});F(this,"messageEventListener",async e=>{const n=e.data;switch(n.type){case"call":{try{if(n.uuid&&n.uuid!==this.uuid)break;if(n.handler.name in this.handlers){const s=this.handlers[n.handler.name],i=await s.func.call(s.this,...n.handler.args),r={type:"return",id:n.id,handler:{name:n.handler.name,result:i}};this.port.postMessage(r)}}catch(s){const i={type:"error",id:n.id,error:s};this.port.postMessage(i)}break}case"error":{const s=this.map.get(n.id);s&&(this.map.delete(n.id),s.reject(n.error));break}case"return":{const s=this.map.get(n.id);s&&(this.map.delete(n.id),s.resolve(n.handler.result));break}}});this.port=e,this.logger=n,this.handlers=s,this.uuid=i,this.port.addEventListener("error",this.errerEventListener),this.port.addEventListener("messageerror",this.errerEventListener),this.port.addEventListener("message",this.messageEventListener)}async call(e,...n){return new Promise((s,i)=>{const r=this.counter++;this.map.set(r,{resolve:s,reject:i});const a={type:"call",id:r,handler:{name:e,args:n}};this.port.postMessage(a)})}async singleCall(e,n,...s){return new Promise((i,r)=>{const a=this.counter++;this.map.set(a,{resolve:i,reject:r});const o={type:"call",id:a,uuid:n,handler:{name:e,args:s}};this.port.postMessage(o)})}}function*Bl(t=0){for(;;)yield t++}const Ll=Bl(Math.round(Math.random()*(36**8-1)));function jl(t,e){return`${t.getFullYear().toString().padStart(4,"0")}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}-${e.toString(36).padStart(7,"0").slice(-7)}`}function Il(t=new Date,e=Ll){return jl(t,e.next().value)}class Ml extends Nl{constructor(e,n,s={},i=Il()){super(e,n,s,i)}async ping(e=1e3){const n=Date.now();return new Promise((s,i)=>{const r=setTimeout(()=>{i(new Error(`timeout: ${e}`))},e);this.port.addEventListener("message",a=>{a.data==="pong"&&(clearTimeout(r),s(Date.now()-n))}),this.port.postMessage("ping")})}terminate(){switch(!0){case"terminate"in this.port:this.port.terminate();break;case"close"in this.port:this.port.close();break}}}const St={wakatime:{api_url:"",api_key:"",timeout:30,hide_branch_names:!0,hide_file_names:!0,offline:!1,includeID:[],excludeID:[],include:[],exclude:[],heartbeats:!1,project:"",language:"",hostname:"",interval:60,view:{category:U.Browsing},edit:{category:U.Learning},system_name:"",system_version:"unknown",system_arch:"unknown",useragent:""}};async function Ul(t){return new Promise(e=>{setTimeout(e,t)})}const Ke=class Ke extends Le.Plugin{constructor(n){super(n);F(this,"siyuan",Le);F(this,"logger");F(this,"client");F(this,"SETTINGS_DIALOG_ID");F(this,"config",St);F(this,"worker");F(this,"bridge");F(this,"heartbeatTimer",0);F(this,"cacheCheckTimer",0);F(this,"webSocketMainEventListener",n=>{if(n.detail.cmd==="transactions"){const s=n.detail.data;s==null||s.forEach(i=>{var r;(r=i.doOperations)==null||r.forEach(a=>{var o;switch(a.action){case"delete":return}a.id&&((o=this.bridge)==null||o.call("addEditEvent",a.id))})})}});F(this,"protyleEventListener",n=>{var i;const s=n.detail.protyle;s.notebookId&&s.path&&s.block.rootID&&((i=this.bridge)==null||i.call("addViewEvent",{id:s.block.rootID,box:s.notebookId,path:s.path}))});F(this,"clickEditorContentEventListener",n=>{var i;const s=n.detail.protyle;s.notebookId&&s.path&&s.block.rootID&&((i=this.bridge)==null||i.call("addViewEvent",{id:s.block.rootID,box:s.notebookId,path:s.path}))});this.logger=new fl(this.name),this.client=new Ta(void 0,"fetch"),this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`}onload(){this.addIcons([Qs,xs].join("")),this.loadData(Ke.GLOBAL_CONFIG_NAME).then(n=>{this.config=ds(St,n||{})}).catch(n=>this.logger.error(n)).finally(async()=>{var s;if(this.initBridge(),!await this.isWorkerRunning()){for(this.initWorker();await this.isWorkerRunning();)await Ul(1e3);await((s=this.bridge)==null?void 0:s.call("onload")),await this.updateWorkerConfig()}this.eventBus.on("ws-main",this.webSocketMainEventListener),this.eventBus.on("loaded-protyle-static",this.protyleEventListener),this.eventBus.on("loaded-protyle-dynamic",this.protyleEventListener),this.eventBus.on("switch-protyle",this.protyleEventListener),this.eventBus.on("destroy-protyle",this.protyleEventListener),this.eventBus.on("click-editorcontent",this.clickEditorContentEventListener)})}onLayoutReady(){}onunload(){var n,s;this.eventBus.off("ws-main",this.webSocketMainEventListener),this.eventBus.off("loaded-protyle-static",this.protyleEventListener),this.eventBus.off("loaded-protyle-dynamic",this.protyleEventListener),this.eventBus.off("switch-protyle",this.protyleEventListener),this.eventBus.off("destroy-protyle",this.protyleEventListener),this.eventBus.off("click-editorcontent",this.clickEditorContentEventListener),this.worker?(n=this.bridge)==null||n.call("unload").then(()=>{var i,r;(i=this.bridge)==null||i.terminate(),(r=this.worker)==null||r.terminate()}):(s=this.bridge)==null||s.terminate()}openSetting(){const n=this,s=new Le.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${n.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:hs?"92vw":"720px",height:hs?void 0:"640px"});new ol({target:s.element.querySelector(`#${n.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(ds(St))}async clearCache(n=Z.OFFLINE_CACHE_PATH){try{return await this.client.removeFile({path:n}),!0}catch{return!1}}async updateConfig(n){return n&&n!==this.config&&(this.config=n),await this.updateWorkerConfig(),this.saveData(Ke.GLOBAL_CONFIG_NAME,this.config)}initBridge(){var n;(n=this.bridge)==null||n.terminate(),this.bridge=new Ml(new BroadcastChannel(Z.WAKATIME_WORKER_BROADCAST_CHANNEL_NAME),this.logger)}initWorker(){var n;(n=this.worker)==null||n.terminate(),this.worker=new Worker(`${globalThis.document.baseURI}plugins/${this.name}/workers/${Z.WAKATIME_WORKER_FILE_NAME}.js?v=${yn.version}`,{type:"module",name:this.name,credentials:"same-origin"})}async isWorkerRunning(){try{return this.bridge||this.initBridge(),await this.bridge.ping(),!0}catch{return!1}}async updateWorkerConfig(){var n,s;await((n=this.bridge)==null?void 0:n.call("updateConfig",this.config,{url:this.wakatimeHeartbeatsApiUrl,headers:this.wakatimeHeaders,project:this.wakatimeProject,language:this.wakatimeLanguage})),await((s=this.bridge)==null?void 0:s.call("restart"))}async testService(){try{const n=await this.client.forwardProxy({url:this.wakatimeStatusBarApiUrl,method:"GET",headers:[this.wakatimeHeaders],timeout:this.config.wakatime.timeout*1e3});return 200<=n.data.status&&n.data.status<300?!0:(this.logger.warn(n),!1)}catch{return!1}}get newId(){return globalThis.Lute.NewNodeID()}get wakatimeDefaultProject(){return`siyuan-workspace:${this.wakatimeWorkspaceName}`}get wakatimeDefaultLanguage(){return Z.WAKATIME_DEFAULT_LANGUAGE}get wakatimeDefaultApiUrl(){return Z.WAKATIME_DEFAULT_API_URL}get wakatimeDefaultHostname(){var n,s,i,r,a,o,l;return((i=(s=(n=globalThis.siyuan)==null?void 0:n.config)==null?void 0:s.system)==null?void 0:i.name)||((a=(r=globalThis.process)==null?void 0:r.env)==null?void 0:a.COMPUTERNAME)||((l=(o=globalThis.process)==null?void 0:o.env)==null?void 0:l.USERDOMAIN)||"unknown"}get wakatimeDefaultUserAgent(){return`${Z.WAKATIME_CLIENT_NAME}/${Z.WAKATIME_CLIENT_VERSION} (${this.wakatimeSystemName}-${this.wakatimeSystemVersion}-${this.wakatimeSystemArch}) ${Z.WAKATIME_EDITOR_NAME}/${this.wakatimeKernelVersion} ${Z.WAKATIME_PLUGIN_NAME}/${yn.version}`}get wakatimeDefaultSystemName(){var n,s,i,r,a;return((i=(s=(n=globalThis.siyuan)==null?void 0:n.config)==null?void 0:s.system)==null?void 0:i.os)||((r=globalThis.process)==null?void 0:r.platform)||((a=globalThis.navigator.userAgentData)==null?void 0:a.platform)||globalThis.navigator.platform||"unknown"}get wakatimeDefaultSystemVersion(){var n,s,i;return((i=(s=(n=globalThis.require)==null?void 0:n.call(globalThis,"os"))==null?void 0:s.release)==null?void 0:i.call(s))||"unknown"}get wakatimeDefaultSystemArch(){var n;return((n=globalThis.process)==null?void 0:n.arch)||"unknown"}get wakatimeHeaders(){return{Authorization:this.wakatimeAuthorization,"User-Agent":this.wakatimeUserAgent,"X-Machine-Name":this.wakatimeHostname}}get wakatimeWorkspaceDirectory(){var n,s,i;return((i=(s=(n=globalThis.siyuan)==null?void 0:n.config)==null?void 0:s.system)==null?void 0:i.workspaceDir)||"unknown"}get wakatimeWorkspaceName(){return Dl(Pl(this.wakatimeWorkspaceDirectory)).base}get wakatimeKernelVersion(){var n,s,i;return((i=(s=(n=globalThis.siyuan)==null?void 0:n.config)==null?void 0:s.system)==null?void 0:i.kernelVersion)||"0.0.0"}get wakatimeApiBaseUrl(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.api_url)||this.wakatimeDefaultApiUrl}get wakatimeStatusBarApiUrl(){return`${this.wakatimeApiBaseUrl}/${Z.WAKATIME_STATUS_BAR_PATHNAME}`}get wakatimeHeartbeatsApiUrl(){return`${this.wakatimeApiBaseUrl}/${Z.WAKATIME_HEARTBEATS_PATHNAME}`}get wakatimeAuthorization(){var n,s;return`Basic ${btoa((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.api_key)}`}get wakatimeHostname(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.hostname)||this.wakatimeDefaultHostname}get wakatimeUserAgent(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.useragent)||this.wakatimeDefaultUserAgent}get wakatimeProject(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.project)||this.wakatimeDefaultProject}get wakatimeLanguage(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.language)||this.wakatimeDefaultLanguage}get wakatimeSystemName(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.system_name)||this.wakatimeDefaultSystemName}get wakatimeSystemVersion(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.system_version)||this.wakatimeDefaultSystemVersion}get wakatimeSystemArch(){var n,s;return((s=(n=this.config)==null?void 0:n.wakatime)==null?void 0:s.system_arch)||this.wakatimeDefaultSystemArch}};F(Ke,"GLOBAL_CONFIG_NAME","global-config");let jt=Ke;module.exports=jt;
